<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Messiah Heredia - Portfolio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23000000'/%3E%3Ctext x='50' y='65' font-family='Poppins,sans-serif' font-size='45' font-weight='bold' text-anchor='middle' fill='%23b9975b'%3EIT%3C/text%3E%3C/svg%3E">
    
    <style>
        /* CSS Variables for consistent theming */
        :root {
            --pfw-gold: #b9975b;
            --pfw-gold-light: #e5c97b;
            --pfw-gold-dark: #a3863a;
            --pfw-gold-darker: #7c6329;
            --bg-primary: #1a1a1a;
            --bg-secondary: #222;
            --bg-tertiary: #333;
            --text-primary: #f3f4f6;
            --text-secondary: rgba(243, 244, 246, 0.8);
        }

        /* Light Theme Styles */
        .light-theme {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            color: #1a202c;
        }

        .light-theme header {
            background: rgba(255, 255, 255, 0.95);
        }

        .light-theme section {
            background: #f8fafc;
        }

        .light-theme #portfolio {
            background: #e2e8f0;
        }

        .light-theme #certifications {
            background: #cbd5e0;
        }

        .light-theme #homelab {
            background: #e2e8f0;
        }

        .light-theme .project-card,
        .light-theme .bg-black {
            background: white !important;
            border-color: #e2e8f0 !important;
            color: #2d3748;
        }

        .light-theme footer {
            background: #2d3748;
            color: #f7fafc;
        }

        .light-theme .text-\[#f3f4f6\]\/80,
        .light-theme .text-\[#f3f4f6\]\/70,
        .light-theme .text-\[#f3f4f6\]\/60 {
            color: #4a5568 !important;
        }

        /* Additional light theme fixes */
        .light-theme header {
            background: rgba(255, 255, 255, 0.95);
            color: #1a202c;
        }

        .light-theme h1,
        .light-theme h2,
        .light-theme h3,
        .light-theme h4,
        .light-theme h5,
        .light-theme h6 {
            color: #2d3748 !important;
        }

        .light-theme .hero-title {
            color: var(--pfw-gold) !important;
        }

        .light-theme p {
            color: #4a5568 !important;
        }

        .light-theme .nav-link {
            color: #2d3748 !important;
        }

        /* AI Chatbox Theme Styles */
        .light-theme #aiChatBox {
            background-color: white !important;
            border-color: rgba(185, 151, 91, 0.3) !important;
        }

        .light-theme #aiMessages {
            background-color: #f7fafc !important;
        }

        .light-theme #aiInput {
            background-color: white !important;
            color: #2d3748 !important;
        }

        .light-theme .ai-input-area {
            background-color: #f1f5f9 !important;
        }

        .light-theme .ai-message-bot {
            background-color: #e2e8f0 !important;
            color: #2d3748 !important;
        }

        .light-theme .ai-message-initial {
            background-color: #e2e8f0 !important;
            color: #2d3748 !important;
        }

        .light-theme .nav-link:hover {
            color: var(--pfw-gold) !important;
        }

        .light-theme .project-card h4 {
            color: var(--pfw-gold) !important;
        }

        .light-theme .project-card .text-sm {
            color: #4a5568 !important;
        }

        * {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
        }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: var(--bg-secondary);
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--pfw-gold);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--pfw-gold-dark);
        }
        
        /* Animation Classes */
        .section-hidden {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }
        
        .section-visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* Navigation Active State */
        nav ul li a.active-link {
            color: var(--pfw-gold) !important;
            border-bottom: 2px solid var(--pfw-gold);
        }
        
        /* Preloader */
        #preloader {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--bg-primary);
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: opacity 0.5s ease-out;
        }

        /* Light Theme Styles */
        .light-theme {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            color: #1a202c;
        }

        .light-theme header {
            background: rgba(255, 255, 255, 0.95);
        }

        .light-theme section {
            background: #f8fafc;
        }

        .light-theme #portfolio {
            background: #e2e8f0;
        }

        .light-theme #certifications {
            background: #cbd5e0;
        }

        .light-theme #homelab {
            background: #e2e8f0;
        }

        .light-theme .project-card,
        .light-theme .bg-black {
            background: white !important;
            border-color: #e2e8f0 !important;
            color: #2d3748;
        }

        .light-theme footer {
            background: #2d3748;
            color: #f7fafc;
        }
        
        /* Light theme voice chat modal styles */
        .light-theme #voiceSelectionModal {
            background: white !important;
            border-color: rgba(185, 151, 91, 0.3) !important;
            color: #2d3748 !important;
        }
        
        .light-theme #voiceSelectionModal .bg-\[#333\] {
            background: #f7fafc !important;
            border-color: rgba(185, 151, 91, 0.2) !important;
        }

        .light-theme #voiceSelectionModal .bg-\[#222\] {
            background: #edf2f7 !important;
            border-color: rgba(185, 151, 91, 0.2) !important;
        }

        .light-theme #voiceSelectionModal .bg-\[#1a1a1a\] {
            background: #f1f5f9 !important;
            border-color: rgba(185, 151, 91, 0.2) !important;
        }
        
        .light-theme #voiceSelectionModal .text-white,
        .light-theme #voiceSelectionModal h4.text-white {
            color: #2d3748 !important;
        }
        
        .light-theme #voiceSelectionModal .text-gray-400 {
            color: #718096 !important;
        }
        
        .light-theme #voiceSelectionModal .border-pfw-gold\/20 {
            border-color: rgba(185, 151, 91, 0.2) !important;
        }
        
        .spinner {
            border: 4px solid rgba(243, 244, 246, 0.1);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border-left-color: var(--pfw-gold);
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Custom Utility Classes */
        .text-pfw-gold { color: var(--pfw-gold) !important; }
        .text-pfw-gold-light { color: var(--pfw-gold-light) !important; }
        .bg-pfw-gold { background-color: var(--pfw-gold) !important; }
        .bg-pfw-gold-dark { background-color: var(--pfw-gold-dark) !important; }
        .bg-pfw-gold-darker { background-color: var(--pfw-gold-darker) !important; }
        .border-pfw-gold { border-color: var(--pfw-gold) !important; }
        .hover\:text-pfw-gold:hover { color: var(--pfw-gold) !important; }
        .hover\:text-pfw-gold-light:hover { color: var(--pfw-gold-light) !important; }
        .hover\:bg-pfw-gold:hover { background-color: var(--pfw-gold) !important; }
        .hover\:bg-pfw-gold-dark:hover { background-color: var(--pfw-gold-dark) !important; }

        /* Enhanced Focus States for Accessibility */
        button:focus,
        input:focus,
        textarea:focus,
        a:focus {
            outline: 2px solid var(--pfw-gold);
            outline-offset: 2px;
        }

        /* Improved Card Hover Effects */
        .project-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .project-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 25px 50px -12px rgba(185, 151, 91, 0.25);
        }

        /* Loading Animation for Images */
        img {
            transition: opacity 0.3s ease;
        }

        /* Horizontal Scroll Container */
        .scroll-container {
            position: relative;
            overflow: hidden;
            padding: 0 2rem;
        }
        
        .scroll-wrapper {
            display: flex;
            gap: 2rem;
            overflow-x: auto;
            scroll-behavior: smooth;
            scrollbar-width: none;
            -ms-overflow-style: none;
            padding-bottom: 1rem;
            scroll-snap-type: x mandatory;
        }
        
        .scroll-wrapper::-webkit-scrollbar {
            display: none;
        }
        
        .scroll-item {
            flex: 0 0 auto;
            min-width: 300px;
            scroll-snap-align: start;
        }
        
        .scroll-button {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            z-index: 10;
            background: rgba(185, 151, 91, 0.9);
            color: black;
            border: none;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            font-size: 16px;
        }
        
        .scroll-button:hover {
            background: var(--pfw-gold);
            transform: translateY(-50%) scale(1.1);
        }
        
        .scroll-button:disabled {
            opacity: 0.3;
            cursor: not-allowed;
            transform: translateY(-50%) scale(0.9);
        }
        
        .scroll-button.left {
            left: 0;
        }
        
        .scroll-button.right {
            right: 0;
        }
        
        /* Scroll indicators */
        .scroll-indicators {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-top: 1.5rem;
        }
        
        .scroll-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(185, 151, 91, 0.3);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .scroll-indicator.active {
            background: var(--pfw-gold);
            transform: scale(1.2);
        }
        
        .scroll-indicator:hover {
            background: var(--pfw-gold-light);
            transform: scale(1.1);
        }

        /* Image loading styles */
        .scroll-item img {
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }
        
        .scroll-item:hover img {
            border-color: var(--pfw-gold);
            transform: scale(1.05);
        }

        /* Mobile Menu Toggle (for future responsive improvements) */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 3rem !important;
            }
            
            .container {
                padding-left: 1rem;
                padding-right: 1rem;
            }
            
            .scroll-item {
                min-width: 280px;
            }
            
            .scroll-button {
                width: 40px;
                height: 40px;
            }
            
            .scroll-button.left {
                left: -20px;
            }
            
            .scroll-button.right {
                right: -20px;
            }
        }

        /* Bounce animations for project cards */
        @keyframes bounceIn {
            0% {
                opacity: 0;
                transform: scale(0.3) translateY(50px);
            }
            50% {
                opacity: 1;
                transform: scale(1.05) translateY(-10px);
            }
            70% {
                transform: scale(0.95) translateY(5px);
            }
            100% {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        .project-card {
            animation: bounceIn 0.8s ease-out forwards;
        }

        .project-card:nth-child(1) {
            animation-delay: 0s;
        }

        .project-card:nth-child(2) {
            animation-delay: 0.2s;
        }

        .project-card:nth-child(3) {
            animation-delay: 0.4s;
        }

        /* Scrolling Skills Animation */
        @keyframes scrollSkills {
            0% {
                transform: translateX(0);
            }
            100% {
                transform: translateX(-50%);
            }
        }

        .animate-scroll {
            animation: scrollSkills 16s linear infinite;
        }

        .animate-scroll:hover {
            animation-play-state: paused;
        }

        /* Projects Horizontal Flow Animation */
        .projects-flow-container {
            position: relative;
            width: 100%;
            overflow: hidden;
        }
        
        .projects-flow {
            animation: flow-projects 40s linear infinite;
            width: max-content;
            display: flex;
            gap: 2rem;
        }
        
        @keyframes flow-projects {
            0% {
                transform: translateX(0);
            }
            100% {
                transform: translateX(-50%);
            }
        }
        
        .projects-flow:hover {
            animation-play-state: paused;
        }
        
        .project-card {
            flex-shrink: 0;
            width: 400px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .project-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(185, 151, 91, 0.3);
        }

        /* Diagram Flow Animation */
        .diagram-flow-container {
            width: 100%;
            overflow: hidden;
        }
        
        .diagrams-flow {
            animation: flow-diagrams 30s linear infinite;
            width: max-content;
            display: flex;
            gap: 2rem;
            padding: 2rem;
        }
        
        @keyframes flow-diagrams {
            0% {
                transform: translateX(0);
            }
            100% {
                transform: translateX(-50%);
            }
        }
        
        .diagrams-flow:hover {
            animation-play-state: paused;
        }
        
        .diagram-card {
            flex-shrink: 0;
            width: 320px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .diagram-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(185, 151, 91, 0.3);
        }

        /* Hero title bounce animation */
        @keyframes titleBounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-20px);
            }
            60% {
                transform: translateY(-10px);
            }
        }

        .hero-title {
            animation: titleBounce 2s ease-in-out infinite;
        }

        /* Diagram Navigation Pills */
        .diagram-nav-pill {
            background: rgba(185, 151, 91, 0.1);
            color: rgba(185, 151, 91, 0.7);
            border: 1px solid rgba(185, 151, 91, 0.2);
        }

        .diagram-nav-pill:hover {
            background: rgba(185, 151, 91, 0.2);
            color: #b9975b;
            border-color: rgba(185, 151, 91, 0.4);
        }

        .diagram-nav-pill.active {
            background: #b9975b;
            color: #000;
            border-color: #b9975b;
        }

        /* Family Slideshow Styles */
        .family-slideshow .slide {
            display: none;
            transition: opacity 0.6s ease-in-out;
        }
        
        .family-slideshow .slide.active {
            display: block;
        }
        
        .slide-indicator {
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .slide-indicator.active {
            background-color: var(--pfw-gold) !important;
        }
        
        /* Voice Mode Styles */
        .voice-mode-active {
            box-shadow: 0 0 20px rgba(185, 151, 91, 0.3);
            animation: voicePulse 2s ease-in-out infinite;
        }
        
        @keyframes voicePulse {
            0%, 100% {
                box-shadow: 0 0 20px rgba(185, 151, 91, 0.3);
            }
            50% {
                box-shadow: 0 0 30px rgba(185, 151, 91, 0.5);
            }
        }
        
        .voice-listening {
            animation: voiceListening 1s ease-in-out infinite;
        }
        
        @keyframes voiceListening {
            0%, 100% {
                background-color: rgba(185, 151, 91, 0.2);
            }
            50% {
                background-color: rgba(185, 151, 91, 0.4);
            }
        }
        
        .voice-speaking {
            animation: voiceSpeaking 0.5s ease-in-out infinite;
        }
        
        @keyframes voiceSpeaking {
            0%, 100% {
                color: #b9975b;
            }
            50% {
                color: #e5c97b;
            }
        }

        /* Skills Horizontal Scroll Animation */
        .skills-scroll-container {
            position: relative;
            width: 100%;
            height: 100px;
            overflow: hidden;
        }
        
        .skills-scroll {
            animation: scroll-horizontal 30s linear infinite;
            width: max-content;
        }
        
        @keyframes scroll-horizontal {
            0% {
                transform: translateX(0);
            }
            100% {
                transform: translateX(-50%);
            }
        }
        
        .skills-scroll:hover {
            animation-play-state: paused;
        }
        
        .skill-item {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .skill-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 193, 7, 0.2);
        }

    </style>
</head>
<body class="light-theme">
    <!-- Preloader - Simplified for better reliability -->
    <div id="preloader">
        <div class="spinner"></div>
    </div>

    <!-- Header & Navigation -->
    <header class="bg-black/90 backdrop-blur-md shadow-xl sticky top-0 z-50 transition-all duration-300">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <!-- Name, GitHub, and LinkedIn -->
            <div class="flex-shrink-0 flex items-center space-x-4">
                <div>
                    <h1 class="text-3xl font-bold text-pfw-gold hover:text-pfw-gold-light transition-colors cursor-pointer">
                        Messiah Heredia
                    </h1>
                </div>
                <div class="flex items-center space-x-3">
                    <a 
                        href="https://github.com/messiahheedia" 
                        target="_blank" 
                        rel="noopener noreferrer"
                        class="text-pfw-gold hover:text-pfw-gold-light transition-colors text-2xl"
                        aria-label="GitHub Profile"
                    >
                        <i class="fab fa-github"></i>
                    </a>
                    <a 
                        href="https://www.linkedin.com/in/messiah-heredia-587a11362/" 
                        target="_blank" 
                        rel="noopener noreferrer"
                        class="text-pfw-gold hover:text-pfw-gold-light transition-colors text-2xl"
                        aria-label="LinkedIn Profile"
                    >
                        <i class="fab fa-linkedin"></i>
                    </a>
                </div>
            </div>
            <!-- Navigation Menu -->
            <nav class="hidden md:block">
                <ul class="flex space-x-8 text-lg">
                    <li><a href="#home" class="nav-link text-[#b9975b]/70 hover:text-pfw-gold transition-colors duration-300 pb-1 relative">Home</a></li>
                    <li><a href="#portfolio" class="nav-link text-[#b9975b]/70 hover:text-pfw-gold transition-colors duration-300 pb-1 relative">Portfolio</a></li>
                    <li><a href="#diagrams" class="nav-link text-[#b9975b]/70 hover:text-pfw-gold transition-colors duration-300 pb-1 relative">Diagrams</a></li>
                    <li><a href="#certifications" class="nav-link text-[#b9975b]/70 hover:text-pfw-gold transition-colors duration-300 pb-1 relative">Certifications</a></li>
                    <li><a href="#homelab" class="nav-link text-[#b9975b]/70 hover:text-pfw-gold transition-colors duration-300 pb-1 relative">Home Lab</a></li>
                    <li><a href="#about" class="nav-link text-[#b9975b]/70 hover:text-pfw-gold transition-colors duration-300 pb-1 relative">About</a></li>
                </ul>
            </nav>
            <!-- Mobile Menu Button -->
            <button class="md:hidden text-pfw-gold hover:text-pfw-gold-light transition-colors" aria-label="Toggle Menu">
                <i class="fas fa-bars text-xl"></i>
            </button>
        </div>
    </header>

    <!-- Hero Section -->
    <section id="home" class="min-h-screen flex items-center justify-center bg-gradient-to-br from-black via-[#1a1a1a] to-[#222] relative overflow-hidden">
        <!-- Background Pattern -->
        <div class="absolute inset-0 opacity-5">
            <div class="absolute inset-0" style="background-image: radial-gradient(circle at 25% 25%, var(--pfw-gold) 2px, transparent 2px); background-size: 50px 50px;"></div>
        </div>
        
        <div class="container mx-auto px-6 text-center relative z-10">
            <!-- PFW Logo in hero section -->
            <div class="flex justify-center mb-4">
                <img src="pfw.png" alt="Purdue University Fort Wayne Logo" class="w-16 h-16 object-contain opacity-80 hover:opacity-100 transition-opacity">
            </div>
            <h2 class="hero-title text-6xl font-bold mb-6 text-pfw-gold">Hi! Welcome to My Portfolio</h2>
            <p class="text-xl mb-8 text-[#f3f4f6]/80 max-w-2xl mx-auto leading-relaxed">
                I'm Siah, a Systems Administrator and Infrastructure Engineer specializing in enterprise infrastructure management, network security, and virtualization platforms. I build and maintain scalable, secure IT environments that enable business growth. My software development skills complement my infrastructure expertise, allowing me to automate operations and create custom solutions when needed.
            </p>
            <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
                <a href="#portfolio" class="bg-pfw-gold hover:bg-pfw-gold-dark text-black font-semibold py-3 px-8 rounded-lg shadow-md hover:shadow-lg transition-all duration-300 text-lg inline-flex items-center">
                    View My Work <i class="fas fa-arrow-right ml-2"></i>
                </a>
                <a href="mailto:messiah.heredia@icloud.com" class="bg-pfw-gold hover:bg-pfw-gold-dark text-black font-semibold py-3 px-8 rounded-lg shadow-md hover:shadow-lg transition-all duration-300 text-lg inline-flex items-center">
                    Get In Touch <i class="fas fa-envelope ml-2"></i>
                </a>
                <a href="/resume.pdf" download="Messiah_Heredia_Resume.pdf" class="bg-pfw-gold hover:bg-pfw-gold-dark text-black font-semibold py-3 px-8 rounded-lg shadow-md hover:shadow-lg transition-all duration-300 text-lg inline-flex items-center">
                    Download Resume <i class="fas fa-download ml-2"></i>
                </a>
            </div>
        </div>
        
        <!-- Scroll Indicator -->
        <div class="absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce">
            <i class="fas fa-chevron-down text-pfw-gold text-2xl"></i>
        </div>
    </section>

    <!-- Portfolio Section -->
    <section id="portfolio" class="py-20 bg-[#1a1a1a]">
        <div class="container mx-auto px-6">
            <div class="text-center mb-16">
                <h3 class="text-4xl font-bold mb-4 text-pfw-gold">My Projects</h3>
                <p class="text-xl text-[#f3f4f6]/70 max-w-2xl mx-auto">
                    Infrastructure automation tools and administration utilities I've developed
                </p>
            </div>
            
            <div class="projects-flow-container">
                <div class="projects-flow" id="projectsFlow">
                    <!-- Project Card 1 -->
                    <article class="scroll-item project-card bg-black rounded-xl shadow-xl overflow-hidden border border-[#333] flex flex-col group">
                        <div class="p-3 flex-grow">
                            <!-- Header Section -->
                            <div class="text-center mb-3">
                                <h4 class="text-xl font-bold text-pfw-gold group-hover:text-pfw-gold-light transition-colors mb-2">
                                    Our Family Connect Application
                                </h4>
                                <p class="text-[#f3f4f6]/80 leading-relaxed max-w-md mx-auto text-sm">
                                    A modern React-based web application for family communication and coordination. Features real-time messaging, event planning, photo sharing, and collaborative tools built with responsive design and clean user interface.
                                </p>
                            </div>
                            
                            <!-- Features Highlight -->
                            <div class="grid grid-cols-2 gap-2 mb-3 text-center">
                                <div class="bg-pfw-gold/10 rounded-lg p-2">
                                    <i class="fas fa-mobile-alt text-pfw-gold text-sm mb-1"></i>
                                    <p class="text-xs text-[#f3f4f6]/80">Responsive Design</p>
                                </div>
                                <div class="bg-pfw-gold/10 rounded-lg p-2">
                                    <i class="fas fa-users text-pfw-gold text-sm mb-1"></i>
                                    <p class="text-xs text-[#f3f4f6]/80">Real-time Chat</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Footer with Actions -->
                        <div class="p-3 pt-0 border-t border-[#333]">
                            <div class="flex justify-between items-center">
                                <a href="https://github.com/messiahheedia/our-family-connect" target="_blank" rel="noopener noreferrer" class="flex items-center text-pfw-gold hover:text-pfw-gold-light transition-colors font-semibold text-xs">
                                    <i class="fab fa-github mr-1"></i> View Code
                                </a>
                                <div class="flex space-x-2">
                                    <a href="/projects/our-family-connect-brief.pdf" download="Our-Family-Connect-Brief.pdf" class="bg-pfw-gold text-black px-2 py-1 rounded-md text-xs font-medium hover:bg-pfw-gold-light transition-colors" title="Download Project Brief">
                                        <i class="fas fa-download mr-1"></i> Brief
                                    </a>
                                    <a href="https://github.com/messiahheedia/our-family-connect" target="_blank" rel="noopener noreferrer" class="text-[#f3f4f6]/60 hover:text-pfw-gold transition-colors">
                                        <i class="fas fa-external-link-alt"></i>
                                    </a>
                                    <button class="text-[#f3f4f6]/60 hover:text-pfw-gold transition-colors" title="Star Project">
                                        <i class="fas fa-star"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </article>

                    <!-- Project Card 2 -->
                    <article class="scroll-item project-card bg-black rounded-xl shadow-xl overflow-hidden border border-[#333] flex flex-col group">
                        <div class="p-3 flex-grow">
                            <!-- Header Section -->
                            <div class="text-center mb-3">
                                <h4 class="text-xl font-bold text-pfw-gold group-hover:text-pfw-gold-light transition-colors mb-2">
                                    QuickCommand
                                </h4>
                                <p class="text-[#f3f4f6]/80 leading-relaxed max-w-md mx-auto text-sm">
                                    An advanced Python-based command-line interface for DevOps automation, featuring secure task execution, encrypted credential management, and enterprise-grade logging for streamlined development workflows.
                                </p>
                            </div>
                            
                            <!-- Features Highlight -->
                            <div class="grid grid-cols-2 gap-2 mb-3 text-center">
                                <div class="bg-pfw-gold/10 rounded-lg p-2">
                                    <i class="fas fa-bolt text-pfw-gold text-sm mb-1"></i>
                                    <p class="text-xs text-[#f3f4f6]/80">Lightning Fast</p>
                                </div>
                                <div class="bg-pfw-gold/10 rounded-lg p-2">
                                    <i class="fas fa-key text-pfw-gold text-sm mb-1"></i>
                                    <p class="text-xs text-[#f3f4f6]/80">Encrypted Credentials</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Footer with Actions -->
                        <div class="p-3 pt-0 border-t border-[#333]">
                            <div class="flex justify-between items-center">
                                <a href="https://github.com/messiahheedia/quickcommand" target="_blank" rel="noopener noreferrer" class="flex items-center text-pfw-gold hover:text-pfw-gold-light transition-colors font-semibold text-xs">
                                    <i class="fab fa-github mr-1"></i> View Code
                                </a>
                                <div class="flex space-x-2">
                                    <a href="/projects/quickcommand-brief.pdf" download="QuickCommand-Brief.pdf" class="bg-pfw-gold text-black px-2 py-1 rounded-md text-xs font-medium hover:bg-pfw-gold-light transition-colors" title="Download Project Brief">
                                        <i class="fas fa-download mr-1"></i> Brief
                                    </a>
                                    <a href="https://github.com/messiahheedia/quickcommand" target="_blank" rel="noopener noreferrer" class="text-[#f3f4f6]/60 hover:text-pfw-gold transition-colors">
                                        <i class="fas fa-external-link-alt"></i>
                                    </a>
                                    <button class="text-[#f3f4f6]/60 hover:text-pfw-gold transition-colors" title="Star Project">
                                        <i class="fas fa-star"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </article>

                    <!-- Project Card 4 - Professional Writing -->
                    <article class="scroll-item project-card bg-black rounded-xl shadow-xl overflow-hidden border border-[#333] flex flex-col group">
                        <div class="p-3 flex-grow">
                            <!-- Header Section -->
                            <div class="text-center mb-3">
                                <h4 class="text-xl font-bold text-pfw-gold group-hover:text-pfw-gold-light transition-colors mb-2">
                                    Professional Writing
                                </h4>
                                <p class="text-[#f3f4f6]/80 leading-relaxed max-w-md mx-auto text-sm">
                                    Academic and technical writing samples including research papers, analysis reports, ethics studies, and professional documentation. Showcasing research, analytical thinking, and communication skills in technology domains.
                                </p>
                            </div>
                            
                            <!-- Features Highlight -->
                            <div class="grid grid-cols-2 gap-2 mb-3 text-center">
                                <div class="bg-pfw-gold/10 rounded-lg p-2">
                                    <i class="fas fa-file-alt text-pfw-gold text-sm mb-1"></i>
                                    <p class="text-xs text-[#f3f4f6]/80">Research Papers</p>
                                </div>
                                <div class="bg-pfw-gold/10 rounded-lg p-2">
                                    <i class="fas fa-brain text-pfw-gold text-sm mb-1"></i>
                                    <p class="text-xs text-[#f3f4f6]/80">AI Ethics</p>
                                </div>
                            </div>
                            
                            <!-- Download Links -->
                            <div class="mb-2 space-y-1">
                                <a href="/projects/raspberry-pi-paper.pdf" download="raspberry-pi-paper.pdf" class="block w-full bg-pfw-gold text-black hover:bg-pfw-gold-dark font-semibold py-1 px-3 rounded-lg transition-all duration-300 text-center text-xs">
                                    <i class="fas fa-download mr-1"></i>
                                    Paper on Raspberry Pi
                                </a>
                                <a href="/projects/recommendationreport.pdf" download="recommendationreport.pdf" class="block w-full bg-pfw-gold text-black hover:bg-pfw-gold-dark font-semibold py-1 px-3 rounded-lg transition-all duration-300 text-center text-xs">
                                    <i class="fas fa-download mr-1"></i>
                                    Recommendation Report
                                </a>
                                <a href="ai.pdf" download="Messiah-Heredia-AI-Ethics-Paper.pdf" class="block w-full bg-pfw-gold text-black hover:bg-pfw-gold-dark font-semibold py-1 px-3 rounded-lg transition-all duration-300 text-center text-xs">
                                    <i class="fas fa-download mr-1"></i>
                                    The Ethical Use of AI
                                </a>
                                <a href="onboarding - Copy.pdf" download="IT-Employee-Onboarding-Guide.pdf" class="block w-full bg-pfw-gold text-black hover:bg-pfw-gold-dark font-semibold py-1 px-3 rounded-lg transition-all duration-300 text-center text-xs">
                                    <i class="fas fa-download mr-1"></i>
                                    IT Employee Onboarding Guide
                                </a>
                                <a href="homelab.pdf" download="Messiah-Heredia-2025-Home-Lab-Plan.pdf" class="block w-full bg-pfw-gold text-black hover:bg-pfw-gold-dark font-semibold py-1 px-3 rounded-lg transition-all duration-300 text-center text-xs">
                                    <i class="fas fa-download mr-1"></i>
                                    2025 Home Lab Plan
                                </a>
                                <a href="POS.pdf" download="Messiah-Heredia-Restaurant-POS-Software-Dev.pdf" class="block w-full bg-pfw-gold text-black hover:bg-pfw-gold-dark font-semibold py-1 px-3 rounded-lg transition-all duration-300 text-center text-xs">
                                    <i class="fas fa-download mr-1"></i>
                                    Restaurant POS Software Dev
                                </a>
                            </div>
                        </div>
                        
                        <!-- Footer with Actions -->
                        <div class="p-3 pt-0 border-t border-[#333]">
                            <div class="flex justify-between items-center">
                                <a href="https://drive.google.com/drive/folders/1-WKC9P1V_gFQ9jglr4ByE9d0eH_1_QPa?usp=sharing" target="_blank" rel="noopener noreferrer" class="flex items-center text-pfw-gold hover:text-pfw-gold-light transition-colors font-semibold text-xs">
                                    <i class="fab fa-google-drive mr-1"></i> View All Samples
                                </a>
                                <div class="flex space-x-2">
                                    <a href="https://drive.google.com/drive/folders/1-WKC9P1V_gFQ9jglr4ByE9d0eH_1_QPa?usp=sharing" target="_blank" rel="noopener noreferrer" class="text-[#f3f4f6]/60 hover:text-pfw-gold transition-colors">
                                        <i class="fas fa-external-link-alt"></i>
                                    </a>
                                    <button class="text-[#f3f4f6]/60 hover:text-pfw-gold transition-colors" title="Bookmark">
                                        <i class="fas fa-bookmark"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </article>

                    <!-- Project Card 5 - IT Diagrams -->
                    <article class="scroll-item project-card bg-black rounded-xl shadow-xl overflow-hidden border border-[#333] flex flex-col group">
                        <div class="p-3 flex-grow">
                            <!-- Header Section -->
                            <div class="text-center mb-3">
                                <h4 class="text-xl font-bold text-pfw-gold group-hover:text-pfw-gold-light transition-colors mb-2">
                                    IT Diagrams
                                </h4>
                                <p class="text-[#f3f4f6]/80 leading-relaxed max-w-md mx-auto text-sm">
                                    Comprehensive collection of IT infrastructure diagrams, network topologies, and visual documentation for enterprise IT environments. Interactive diagrams for system architecture and network design.
                                </p>
                            </div>
                            
                            <!-- Features Highlight -->
                            <div class="grid grid-cols-2 gap-2 mb-3 text-center">
                                <div class="bg-pfw-gold/10 rounded-lg p-2">
                                    <i class="fas fa-network-wired text-pfw-gold text-sm mb-1"></i>
                                    <p class="text-xs text-[#f3f4f6]/80">Network Topology</p>
                                </div>
                                <div class="bg-pfw-gold/10 rounded-lg p-2">
                                    <i class="fas fa-diagram-project text-pfw-gold text-sm mb-1"></i>
                                    <p class="text-xs text-[#f3f4f6]/80">System Diagrams</p>
                                </div>
                            </div>
                            
                            <!-- Download Links -->
                            <div class="mb-2 space-y-1">
                                <button onclick="openDiagramViewer('network')" class="block w-full bg-pfw-gold text-black hover:bg-pfw-gold-dark font-semibold py-1 px-3 rounded-lg transition-all duration-300 text-center text-xs">
                                    <i class="fas fa-eye mr-1"></i>
                                    View Interactive Network Diagrams
                                </button>
                                <button onclick="openDiagramEditor()" class="block w-full bg-pfw-gold text-black hover:bg-pfw-gold-dark font-semibold py-1 px-3 rounded-lg transition-all duration-300 text-center text-xs">
                                    <i class="fas fa-edit mr-1"></i>
                                    Open Diagram Editor
                                </button>
                            </div>
                        </div>
                        
                        <!-- Footer with Actions -->
                        <div class="p-3 pt-0 border-t border-[#333]">
                            <div class="flex justify-between items-center">
                                <a href="https://drive.google.com/drive/folders/1-WKC9P1V_gFQ9jglr4ByE9d0eH_1_QPa?usp=sharing" target="_blank" rel="noopener noreferrer" class="flex items-center text-pfw-gold hover:text-pfw-gold-light transition-colors font-semibold text-xs">
                                    <i class="fab fa-google-drive mr-1"></i> View All Diagrams
                                </a>
                                <div class="flex space-x-2">
                                    <a href="https://drive.google.com/drive/folders/1-WKC9P1V_gFQ9jglr4ByE9d0eH_1_QPa?usp=sharing" target="_blank" rel="noopener noreferrer" class="text-[#f3f4f6]/60 hover:text-pfw-gold transition-colors">
                                        <i class="fas fa-external-link-alt"></i>
                                    </a>
                                    <button class="text-[#f3f4f6]/60 hover:text-pfw-gold transition-colors" title="Bookmark">
                                        <i class="fas fa-bookmark"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </article>

                    <!-- Project Card 7 - Security Operations -->
                    <article class="project-card bg-black rounded-xl shadow-2xl overflow-hidden border border-[#333] flex flex-col group">
                        <div class="p-6 flex-grow">
                            <!-- Header Section -->
                            <div class="text-center mb-6">
                                <h4 class="text-3xl font-bold text-pfw-gold group-hover:text-pfw-gold-light transition-colors mb-3">
                                    Security Operations
                                </h4>
                                <p class="text-[#f3f4f6]/80 leading-relaxed max-w-md mx-auto">
                                    Comprehensive security operations center (SOC) implementations with SIEM integration, threat hunting capabilities, and incident response automation for enterprise cybersecurity management.
                                </p>
                            </div>
                            
                            <!-- Technology Tags -->
                            <div class="flex flex-wrap gap-2 mb-8 justify-center">
                                <span class="px-4 py-2 bg-pfw-gold/20 text-pfw-gold text-sm rounded-full font-medium">SIEM</span>
                                <span class="px-4 py-2 bg-pfw-gold/20 text-pfw-gold text-sm rounded-full font-medium">Splunk</span>
                                <span class="px-4 py-2 bg-pfw-gold/20 text-pfw-gold text-sm rounded-full font-medium">Python</span>
                            </div>
                            
                            <!-- Image Showcase -->
                            <div class="relative mb-8">
                                <div class="absolute inset-0 bg-gradient-to-r from-pfw-gold/10 via-pfw-gold/20 to-pfw-gold/10 rounded-2xl blur-xl"></div>
                                <div class="relative bg-gradient-to-br from-[#2a2a2a] to-[#1a1a1a] rounded-2xl p-4 border border-pfw-gold/30">
                                    <div class="flex justify-center">
                                        <img src="website.png" alt="Security Operations Dashboard" class="w-full max-w-lg h-auto object-contain rounded-lg shadow-2xl">
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Features Highlight -->
                            <div class="grid grid-cols-2 gap-4 mb-6 text-center">
                                <div class="bg-pfw-gold/10 rounded-lg p-3">
                                    <i class="fas fa-shield-alt text-pfw-gold text-xl mb-2"></i>
                                    <p class="text-sm text-[#f3f4f6]/80">Threat Detection</p>
                                </div>
                                <div class="bg-pfw-gold/10 rounded-lg p-3">
                                    <i class="fas fa-search text-pfw-gold text-xl mb-2"></i>
                                    <p class="text-sm text-[#f3f4f6]/80">Threat Hunting</p>
                                </div>
                            </div>
                            
                            <!-- Security Features -->
                            <div class="bg-gradient-to-r from-red-900/20 to-pink-900/20 rounded-lg p-3 mb-4 border border-red-500/30">
                                <div class="flex items-center justify-center text-red-400">
                                    <i class="fas fa-bug mr-2"></i>
                                    <span class="text-sm font-medium">Incident Response • Log Analysis • Vulnerability Management</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Footer with Actions -->
                        <div class="p-6 pt-0 border-t border-[#333]">
                            <div class="flex justify-between items-center">
                                <a href="https://github.com/messiahheedia" target="_blank" rel="noopener noreferrer" class="flex items-center text-pfw-gold hover:text-pfw-gold-light transition-colors font-semibold">
                                    <i class="fab fa-github mr-2"></i> View Security Tools
                                </a>
                                <div class="flex space-x-3">
                                    <a href="https://github.com/messiahheedia" target="_blank" rel="noopener noreferrer" class="text-[#f3f4f6]/60 hover:text-pfw-gold transition-colors">
                                        <i class="fas fa-external-link-alt"></i>
                                    </a>
                                    <button class="text-[#f3f4f6]/60 hover:text-pfw-gold transition-colors" title="Star Project">
                                        <i class="fas fa-star"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </article>

                    <!-- Duplicate all cards for seamless infinite scroll -->
                    <!-- Project Card 1 (Duplicate) -->
                    <article class="project-card bg-black rounded-xl shadow-2xl overflow-hidden border border-[#333] flex flex-col group">
                        <div class="p-6 flex-grow">
                            <!-- Header Section -->
                            <div class="text-center mb-6">
                                <h4 class="text-3xl font-bold text-pfw-gold group-hover:text-pfw-gold-light transition-colors mb-3">
                                    Our Family Connect Application
                                </h4>
                                <p class="text-[#f3f4f6]/80 leading-relaxed max-w-md mx-auto">
                                    A modern React-based web application for family communication and coordination. Features real-time messaging, event planning, photo sharing, and collaborative tools built with responsive design and clean user interface.
                                </p>
                            </div>
                            
                            <!-- Technology Tags -->
                            <div class="flex flex-wrap gap-2 mb-8 justify-center">
                                <span class="px-4 py-2 bg-pfw-gold/20 text-pfw-gold text-sm rounded-full font-medium">React</span>
                                <span class="px-4 py-2 bg-pfw-gold/20 text-pfw-gold text-sm rounded-full font-medium">Node.js</span>
                                <span class="px-4 py-2 bg-pfw-gold/20 text-pfw-gold text-sm rounded-full font-medium">JavaScript</span>
                            </div>
                            
                            <!-- Image Showcase -->
                            <div class="relative mb-8">
                                <div class="absolute inset-0 bg-gradient-to-r from-pfw-gold/10 via-pfw-gold/20 to-pfw-gold/10 rounded-2xl blur-xl"></div>
                                <div class="relative bg-gradient-to-br from-[#2a2a2a] to-[#1a1a1a] rounded-2xl p-4 border border-pfw-gold/30">
                                    <div class="flex justify-center">
                                        <img src="our_family_connect.png" alt="Our Family Connect Project" class="w-full max-w-lg h-auto object-contain rounded-lg shadow-2xl">
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Features Highlight -->
                            <div class="grid grid-cols-2 gap-4 mb-6 text-center">
                                <div class="bg-pfw-gold/10 rounded-lg p-3">
                                    <i class="fas fa-mobile-alt text-pfw-gold text-xl mb-2"></i>
                                    <p class="text-sm text-[#f3f4f6]/80">Responsive Design</p>
                                </div>
                                <div class="bg-pfw-gold/10 rounded-lg p-3">
                                    <i class="fas fa-users text-pfw-gold text-xl mb-2"></i>
                                    <p class="text-sm text-[#f3f4f6]/80">Real-time Chat</p>
                                </div>
                            </div>
                            
                            <!-- Security Features -->
                            <div class="bg-gradient-to-r from-green-900/20 to-emerald-900/20 rounded-lg p-3 mb-4 border border-green-500/30">
                                <div class="flex items-center justify-center text-green-400">
                                    <i class="fas fa-react mr-2"></i>
                                    <span class="text-sm font-medium">Modern React • Component Architecture • State Management</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Footer with Actions -->
                        <div class="p-6 pt-0 border-t border-[#333]">
                            <div class="flex justify-between items-center">
                                <a href="https://github.com/messiahheedia/our-family-connect" target="_blank" rel="noopener noreferrer" class="flex items-center text-pfw-gold hover:text-pfw-gold-light transition-colors font-semibold">
                                    <i class="fab fa-github mr-2"></i> View Code
                                </a>
                                <div class="flex space-x-3">
                                    <a href="https://github.com/messiahheedia/our-family-connect" target="_blank" rel="noopener noreferrer" class="text-[#f3f4f6]/60 hover:text-pfw-gold transition-colors">
                                        <i class="fas fa-external-link-alt"></i>
                                    </a>
                                    <button class="text-[#f3f4f6]/60 hover:text-pfw-gold transition-colors" title="Star Project">
                                        <i class="fas fa-star"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </article>

                    <!-- Project Card 2 (Duplicate) -->
                    <article class="project-card bg-black rounded-xl shadow-2xl overflow-hidden border border-[#333] flex flex-col group">
                        <div class="p-6 flex-grow">
                            <!-- Header Section -->
                            <div class="text-center mb-6">
                                <h4 class="text-3xl font-bold text-pfw-gold group-hover:text-pfw-gold-light transition-colors mb-3">
                                    QuickCommand
                                </h4>
                                <p class="text-[#f3f4f6]/80 leading-relaxed max-w-md mx-auto">
                                    An advanced Python-based command-line interface for DevOps automation, featuring secure task execution, encrypted credential management, and enterprise-grade logging for streamlined development workflows.
                                </p>
                            </div>
                            
                            <!-- Technology Tags -->
                            <div class="flex flex-wrap gap-2 mb-8 justify-center">
                                <span class="px-4 py-2 bg-pfw-gold/20 text-pfw-gold text-sm rounded-full font-medium">Python</span>
                                <span class="px-4 py-2 bg-pfw-gold/20 text-pfw-gold text-sm rounded-full font-medium">CLI</span>
                                <span class="px-4 py-2 bg-pfw-gold/20 text-pfw-gold text-sm rounded-full font-medium">Automation</span>
                            </div>
                            
                            <!-- Image Showcase -->
                            <div class="relative mb-8">
                                <div class="absolute inset-0 bg-gradient-to-r from-pfw-gold/10 via-pfw-gold/20 to-pfw-gold/10 rounded-2xl blur-xl"></div>
                                <div class="relative bg-gradient-to-br from-[#2a2a2a] to-[#1a1a1a] rounded-2xl p-4 border border-pfw-gold/30">
                                    <div class="flex justify-center">
                                        <img src="quickcommand.png" alt="QuickCommand Tool" class="w-full max-w-lg h-auto object-contain rounded-lg shadow-2xl">
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Features Highlight -->
                            <div class="grid grid-cols-2 gap-4 mb-6 text-center">
                                <div class="bg-pfw-gold/10 rounded-lg p-3">
                                    <i class="fas fa-bolt text-pfw-gold text-xl mb-2"></i>
                                    <p class="text-sm text-[#f3f4f6]/80">Lightning Fast</p>
                                </div>
                                <div class="bg-pfw-gold/10 rounded-lg p-3">
                                    <i class="fas fa-key text-pfw-gold text-xl mb-2"></i>
                                    <p class="text-sm text-[#f3f4f6]/80">Encrypted Credentials</p>
                                </div>
                            </div>
                            
                            <!-- Security Features -->
                            <div class="bg-gradient-to-r from-blue-900/20 to-cyan-900/20 rounded-lg p-3 mb-4 border border-blue-500/30">
                                <div class="flex items-center justify-center text-blue-400">
                                    <i class="fas fa-user-shield mr-2"></i>
                                    <span class="text-sm font-medium">Secure Execution • Audit Logging • Permission Controls</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Footer with Actions -->
                        <div class="p-6 pt-0 border-t border-[#333]">
                            <div class="flex justify-between items-center">
                                <a href="https://github.com/messiahheedia/quickcommand" target="_blank" rel="noopener noreferrer" class="flex items-center text-pfw-gold hover:text-pfw-gold-light transition-colors font-semibold">
                                    <i class="fab fa-github mr-2"></i> View Code
                                </a>
                                <div class="flex space-x-3">
                                    <a href="https://github.com/messiahheedia/quickcommand" target="_blank" rel="noopener noreferrer" class="text-[#f3f4f6]/60 hover:text-pfw-gold transition-colors">
                                        <i class="fas fa-external-link-alt"></i>
                                    </a>
                                    <button class="text-[#f3f4f6]/60 hover:text-pfw-gold transition-colors" title="Star Project">
                                        <i class="fas fa-star"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </article>

                    <!-- Continue with duplicates of the remaining cards... -->
                </div>
            </div>
            
            <!-- View More Projects Button -->
            <div class="text-center mt-12">
                <a href="https://github.com/messiahheedia" target="_blank" rel="noopener noreferrer" class="inline-flex items-center text-pfw-gold hover:text-pfw-gold-light transition-colors font-medium text-lg">
                    View All Projects on GitHub <i class="fas fa-arrow-right ml-2"></i>
                </a>
            </div>
        </div>
    </section>

    <!-- Certifications Section -->
    <section id="certifications" class="py-20 bg-[#222]">
        <div class="container mx-auto px-6">
            <div class="text-center mb-16">
                <h3 class="text-4xl font-bold mb-4 text-pfw-gold">Certifications</h3>
                <p class="text-xl text-[#f3f4f6]/70 max-w-2xl mx-auto">
                    Current certifications and upcoming goals in cybersecurity and cloud computing
                </p>
            </div>
            
            <!-- Current Certifications -->
            <div class="mb-12">
                <h4 class="text-2xl font-semibold mb-8 text-center text-pfw-gold-light">Current Certifications</h4>
                <div class="grid md:grid-cols-3 gap-6 max-w-4xl mx-auto">
                    <!-- CompTIA A+ -->
                    <div class="bg-black p-6 rounded-xl border border-[#333] text-center group hover:border-pfw-gold transition-colors">
                        <div class="flex justify-center mb-4">
                            <img src="Acert" alt="CompTIA A+ Certification" class="w-24 h-24 object-contain rounded-lg">
                        </div>
                        <h4 class="text-xl font-semibold mb-2 text-pfw-gold">CompTIA A+</h4>
                        <p class="text-[#f3f4f6]/80 mb-3">Hardware and software fundamentals, troubleshooting</p>
                        <div class="mt-3 mb-4">
                            <span class="inline-block bg-green-600/20 text-green-400 px-3 py-1 rounded-full text-sm">Certified</span>
                        </div>
                        <a href="#" target="_blank" rel="noopener noreferrer" class="text-pfw-gold hover:text-pfw-gold-light transition-colors text-sm font-medium">
                            <i class="fas fa-external-link-alt mr-1"></i> Verify Certification
                        </a>
                    </div>
                    
                    <!-- CompTIA Network+ -->
                    <div class="bg-black p-6 rounded-xl border border-[#333] text-center group hover:border-pfw-gold transition-colors">
                        <div class="flex justify-center mb-4">
                            <img src="Ncert.png" alt="CompTIA Network+ Certification" class="w-24 h-24 object-contain rounded-lg">
                        </div>
                        <h4 class="text-xl font-semibold mb-2 text-pfw-gold">CompTIA Network+</h4>
                        <p class="text-[#f3f4f6]/80 mb-3">Networking fundamentals, infrastructure, and security</p>
                        <div class="mt-3 mb-4">
                            <span class="inline-block bg-green-600/20 text-green-400 px-3 py-1 rounded-full text-sm">Certified</span>
                        </div>
                        <a href="#" target="_blank" rel="noopener noreferrer" class="text-pfw-gold hover:text-pfw-gold-light transition-colors text-sm font-medium">
                            <i class="fas fa-external-link-alt mr-1"></i> Verify Certification
                        </a>
                    </div>
                    
                    <!-- CompTIA Security+ -->
                    <div class="bg-black p-6 rounded-xl border border-[#333] text-center group hover:border-pfw-gold transition-colors">
                        <div class="flex justify-center mb-4">
                            <img src="Scert.png" alt="CompTIA Security+ Certification" class="w-24 h-24 object-contain rounded-lg">
                        </div>
                        <h4 class="text-xl font-semibold mb-2 text-pfw-gold">CompTIA Security+</h4>
                        <p class="text-[#f3f4f6]/80 mb-3">Cybersecurity principles and threat management</p>
                        <div class="mt-3 mb-4">
                            <span class="inline-block bg-green-600/20 text-green-400 px-3 py-1 rounded-full text-sm">Certified</span>
                        </div>
                        <a href="#" target="_blank" rel="noopener noreferrer" class="text-pfw-gold hover:text-pfw-gold-light transition-colors text-sm font-medium">
                            <i class="fas fa-external-link-alt mr-1"></i> Verify Certification
                        </a>
                    </div>
                </div>
            </div>

            <!-- Future Certifications -->
            <div>
                <h4 class="text-2xl font-semibold mb-8 text-center text-pfw-gold-light">Pursuing Next</h4>
                <div class="grid md:grid-cols-2 gap-6 max-w-2xl mx-auto">
                    <div class="bg-black p-6 rounded-xl border border-[#333] text-center group hover:border-pfw-gold/50 transition-colors">
                        <div class="flex justify-center mb-4">
                            <img src="cysa.png" alt="CompTIA CySA+ Certification" class="w-24 h-24 object-contain rounded-lg">
                        </div>
                        <h5 class="text-lg font-semibold mb-2 text-pfw-gold/80">CompTIA CySA+</h5>
                        <p class="text-[#f3f4f6]/60 text-sm">Cybersecurity Analyst</p>
                        <div class="mt-3">
                            <span class="inline-block bg-blue-600/20 text-blue-400 px-3 py-1 rounded-full text-xs">In Progress</span>
                        </div>
                    </div>
                    
                    <div class="bg-black p-6 rounded-xl border border-[#333] text-center group hover:border-pfw-gold/50 transition-colors">
                        <div class="flex justify-center mb-4">
                            <img src="aws.png" alt="AWS Cloud Practitioner Certification" class="w-24 h-24 object-contain rounded-lg">
                        </div>
                        <h5 class="text-lg font-semibold mb-2 text-pfw-gold/80">AWS Cloud Practitioner</h5>
                        <p class="text-[#f3f4f6]/60 text-sm">Foundational</p>
                        <div class="mt-3">
                            <span class="inline-block bg-yellow-600/20 text-yellow-400 px-3 py-1 rounded-full text-xs">Planned</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Interactive Diagrams Section -->
    <section id="diagrams" class="py-20 bg-[#1a1a1a]">
        <div class="container mx-auto px-6">
            <div class="text-center mb-16">
                <h3 class="text-4xl font-bold mb-4 text-pfw-gold">Interactive Technical Diagrams</h3>
                <p class="text-xl text-[#f3f4f6]/70 max-w-3xl mx-auto">
                    Explore my network architectures, security designs, and infrastructure layouts through interactive diagrams powered by draw.io
                </p>
            </div>
            
            <!-- Flowing Diagram Carousel -->
            <div class="overflow-hidden bg-gradient-to-r from-[#1a1a1a] via-black to-[#1a1a1a] rounded-xl border border-[#333] mb-12">
                <div class="diagram-flow-container">
                    <div class="diagrams-flow">
                        <!-- Diagram 1 -->
                        <div class="diagram-card bg-black border border-[#333] rounded-xl p-6">
                            <div class="text-center mb-4">
                                <div class="w-12 h-12 bg-pfw-gold/20 rounded-lg flex items-center justify-center mx-auto mb-3">
                                    <span class="text-pfw-gold text-xl font-bold">1</span>
                                </div>
                                <h4 class="text-lg font-semibold text-pfw-gold mb-2">Network Architecture</h4>
                            </div>
                            <div class="diagram-preview bg-[#1a1a1a] rounded-lg p-4 mb-4 h-48 flex items-center justify-center border border-[#333]">
                                <div class="text-center">
                                    <i class="fas fa-network-wired text-pfw-gold text-4xl mb-3"></i>
                                    <p class="text-[#f3f4f6]/70 text-sm">Enterprise Network Topology</p>
                                    <p class="text-[#f3f4f6]/50 text-xs mt-1">VLAN Segmentation & Routing</p>
                                </div>
                            </div>
                            <button onclick="openDiagramViewer('network')" class="w-full bg-pfw-gold/20 hover:bg-pfw-gold hover:text-black text-pfw-gold font-semibold py-2 px-4 rounded transition-all duration-300">
                                <i class="fas fa-expand mr-2"></i>View Full Diagram
                            </button>
                        </div>

                        <!-- Diagram 2 -->
                        <div class="diagram-card bg-black border border-[#333] rounded-xl p-6">
                            <div class="text-center mb-4">
                                <div class="w-12 h-12 bg-pfw-gold/20 rounded-lg flex items-center justify-center mx-auto mb-3">
                                    <span class="text-pfw-gold text-xl font-bold">2</span>
                                </div>
                                <h4 class="text-lg font-semibold text-pfw-gold mb-2">Security Architecture</h4>
                            </div>
                            <div class="diagram-preview bg-[#1a1a1a] rounded-lg p-4 mb-4 h-48 flex items-center justify-center border border-[#333]">
                                <div class="text-center">
                                    <i class="fas fa-shield-alt text-pfw-gold text-4xl mb-3"></i>
                                    <p class="text-[#f3f4f6]/70 text-sm">Security Implementation</p>
                                    <p class="text-[#f3f4f6]/50 text-xs mt-1">DMZ & Firewall Configuration</p>
                                </div>
                            </div>
                            <button onclick="openDiagramViewer('security')" class="w-full bg-pfw-gold/20 hover:bg-pfw-gold hover:text-black text-pfw-gold font-semibold py-2 px-4 rounded transition-all duration-300">
                                <i class="fas fa-expand mr-2"></i>View Full Diagram
                            </button>
                        </div>

                        <!-- Diagram 3 -->
                        <div class="diagram-card bg-black border border-[#333] rounded-xl p-6">
                            <div class="text-center mb-4">
                                <div class="w-12 h-12 bg-pfw-gold/20 rounded-lg flex items-center justify-center mx-auto mb-3">
                                    <span class="text-pfw-gold text-xl font-bold">3</span>
                                </div>
                                <h4 class="text-lg font-semibold text-pfw-gold mb-2">Infrastructure Design</h4>
                            </div>
                            <div class="diagram-preview bg-[#1a1a1a] rounded-lg p-4 mb-4 h-48 flex items-center justify-center border border-[#333]">
                                <div class="text-center">
                                    <i class="fas fa-server text-pfw-gold text-4xl mb-3"></i>
                                    <p class="text-[#f3f4f6]/70 text-sm">Cloud Infrastructure</p>
                                    <p class="text-[#f3f4f6]/50 text-xs mt-1">Virtualization & Integration</p>
                                </div>
                            </div>
                            <button onclick="openDiagramViewer('infrastructure')" class="w-full bg-pfw-gold/20 hover:bg-pfw-gold hover:text-black text-pfw-gold font-semibold py-2 px-4 rounded transition-all duration-300">
                                <i class="fas fa-expand mr-2"></i>View Full Diagram
                            </button>
                        </div>

                        <!-- Duplicate set for seamless looping -->
                        <!-- Diagram 1 (Duplicate) -->
                        <div class="diagram-card bg-black border border-[#333] rounded-xl p-6">
                            <div class="text-center mb-4">
                                <div class="w-12 h-12 bg-pfw-gold/20 rounded-lg flex items-center justify-center mx-auto mb-3">
                                    <span class="text-pfw-gold text-xl font-bold">1</span>
                                </div>
                                <h4 class="text-lg font-semibold text-pfw-gold mb-2">Network Architecture</h4>
                            </div>
                            <div class="diagram-preview bg-[#1a1a1a] rounded-lg p-4 mb-4 h-48 flex items-center justify-center border border-[#333]">
                                <div class="text-center">
                                    <i class="fas fa-network-wired text-pfw-gold text-4xl mb-3"></i>
                                    <p class="text-[#f3f4f6]/70 text-sm">Enterprise Network Topology</p>
                                    <p class="text-[#f3f4f6]/50 text-xs mt-1">VLAN Segmentation & Routing</p>
                                </div>
                            </div>
                            <button onclick="openDiagramViewer('network')" class="w-full bg-pfw-gold/20 hover:bg-pfw-gold hover:text-black text-pfw-gold font-semibold py-2 px-4 rounded transition-all duration-300">
                                <i class="fas fa-expand mr-2"></i>View Full Diagram
                            </button>
                        </div>

                        <!-- Diagram 2 (Duplicate) -->
                        <div class="diagram-card bg-black border border-[#333] rounded-xl p-6">
                            <div class="text-center mb-4">
                                <div class="w-12 h-12 bg-pfw-gold/20 rounded-lg flex items-center justify-center mx-auto mb-3">
                                    <span class="text-pfw-gold text-xl font-bold">2</span>
                                </div>
                                <h4 class="text-lg font-semibold text-pfw-gold mb-2">Security Architecture</h4>
                            </div>
                            <div class="diagram-preview bg-[#1a1a1a] rounded-lg p-4 mb-4 h-48 flex items-center justify-center border border-[#333]">
                                <div class="text-center">
                                    <i class="fas fa-shield-alt text-pfw-gold text-4xl mb-3"></i>
                                    <p class="text-[#f3f4f6]/70 text-sm">Security Implementation</p>
                                    <p class="text-[#f3f4f6]/50 text-xs mt-1">DMZ & Firewall Configuration</p>
                                </div>
                            </div>
                            <button onclick="openDiagramViewer('security')" class="w-full bg-pfw-gold/20 hover:bg-pfw-gold hover:text-black text-pfw-gold font-semibold py-2 px-4 rounded transition-all duration-300">
                                <i class="fas fa-expand mr-2"></i>View Full Diagram
                            </button>
                        </div>

                        <!-- Diagram 3 (Duplicate) -->
                        <div class="diagram-card bg-black border border-[#333] rounded-xl p-6">
                            <div class="text-center mb-4">
                                <div class="w-12 h-12 bg-pfw-gold/20 rounded-lg flex items-center justify-center mx-auto mb-3">
                                    <span class="text-pfw-gold text-xl font-bold">3</span>
                                </div>
                                <h4 class="text-lg font-semibold text-pfw-gold mb-2">Infrastructure Design</h4>
                            </div>
                            <div class="diagram-preview bg-[#1a1a1a] rounded-lg p-4 mb-4 h-48 flex items-center justify-center border border-[#333]">
                                <div class="text-center">
                                    <i class="fas fa-server text-pfw-gold text-4xl mb-3"></i>
                                    <p class="text-[#f3f4f6]/70 text-sm">Cloud Infrastructure</p>
                                    <p class="text-[#f3f4f6]/50 text-xs mt-1">Virtualization & Integration</p>
                                </div>
                            </div>
                            <button onclick="openDiagramViewer('infrastructure')" class="w-full bg-pfw-gold/20 hover:bg-pfw-gold hover:text-black text-pfw-gold font-semibold py-2 px-4 rounded transition-all duration-300">
                                <i class="fas fa-expand mr-2"></i>View Full Diagram
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Full-Screen Diagram Modal (Hidden by default) -->
            <div id="diagramModal" class="fixed inset-0 bg-black/95 z-50 hidden">
                <div class="h-full flex flex-col">
                    <!-- Modal Header -->
                    <div class="bg-gradient-to-r from-pfw-gold/20 to-pfw-gold/10 p-4 border-b border-[#333] flex justify-between items-center">
                        <h4 id="modalDiagramTitle" class="text-xl font-semibold text-pfw-gold">Network Architecture Diagram</h4>
                        <button onclick="closeDiagramModal()" class="bg-red-600/20 hover:bg-red-600 text-red-400 hover:text-white px-3 py-1 rounded text-sm transition-all duration-300">
                            <i class="fas fa-times mr-1"></i>Close
                        </button>
                    </div>
                    
                    <!-- Modal Content -->
                    <div id="modalDiagramContainer" class="flex-1 relative">
                        <div class="absolute inset-0 flex items-center justify-center">
                            <div class="text-center">
                                <i class="fas fa-spinner fa-spin text-pfw-gold text-3xl mb-4"></i>
                                <p class="text-[#f3f4f6]/70">Loading interactive diagram...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Quick Actions -->
            <div class="grid md:grid-cols-2 gap-6 mt-12">
                <div class="bg-black rounded-xl p-6 border border-[#333]">
                    <h5 class="text-lg font-semibold mb-3 text-pfw-gold">Create New Diagram</h5>
                    <p class="text-[#f3f4f6]/80 mb-4">Launch draw.io editor to create your own network or infrastructure diagrams</p>
                    <button onclick="createNewDiagram()" class="bg-pfw-gold hover:bg-pfw-gold-dark text-black font-semibold py-2 px-6 rounded transition-all duration-300">
                        <i class="fas fa-plus mr-2"></i>New Diagram
                    </button>
                </div>
                
                <div class="bg-black rounded-xl p-6 border border-[#333]">
                    <h5 class="text-lg font-semibold mb-3 text-pfw-gold">Template Library</h5>
                    <p class="text-[#f3f4f6]/80 mb-4">Access pre-built templates for common IT infrastructure patterns</p>
                    <button onclick="openTemplateLibrary()" class="bg-pfw-gold hover:bg-pfw-gold-dark text-black font-semibold py-2 px-6 rounded transition-all duration-300">
                        <i class="fas fa-layer-group mr-2"></i>Browse Templates
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Home Lab Section -->
    <section id="homelab" class="py-20 bg-[#1a1a1a]">
        <div class="container mx-auto px-6">
            <div class="text-center mb-16">
                <h3 class="text-4xl font-bold mb-4 text-pfw-gold">My Home Lab - Coming August 2025</h3>
                <p class="text-xl text-[#f3f4f6]/70 max-w-2xl mx-auto">
                    A dedicated infrastructure environment for continuous learning, testing, and innovation
                </p>
            </div>
            
            <!-- Current Lab Setup -->
            <div class="mb-16">
                <h4 class="text-2xl font-semibold mb-8 text-center text-pfw-gold-light">Current Infrastructure</h4>
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Virtualization -->
                    <div class="bg-black p-6 rounded-xl border border-[#333] text-center group hover:border-pfw-gold transition-colors">
                        <div class="w-12 h-12 bg-pfw-gold/20 rounded-lg flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-server text-pfw-gold text-2xl"></i>
                        </div>
                        <h5 class="text-xl font-semibold mb-3 text-pfw-gold">Virtualization Platform</h5>
                        <p class="text-[#f3f4f6]/80 mb-3">VMware vSphere & Proxmox VE for enterprise-grade virtualization</p>
                        <div class="flex flex-wrap gap-1 justify-center">
                            <span class="px-2 py-1 bg-pfw-gold/20 text-pfw-gold text-xs rounded-full">VMware</span>
                            <span class="px-2 py-1 bg-pfw-gold/20 text-pfw-gold text-xs rounded-full">Proxmox</span>
                        </div>
                    </div>
                    
                    <!-- Network Infrastructure -->
                    <div class="bg-black p-6 rounded-xl border border-[#333] text-center group hover:border-pfw-gold transition-colors">
                        <div class="w-12 h-12 bg-pfw-gold/20 rounded-lg flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-network-wired text-pfw-gold text-2xl"></i>
                        </div>
                        <h5 class="text-xl font-semibold mb-3 text-pfw-gold">Network Lab</h5>
                        <p class="text-[#f3f4f6]/80 mb-3">Cisco & Ubiquiti equipment for advanced networking scenarios</p>
                        <div class="flex flex-wrap gap-1 justify-center">
                            <span class="px-2 py-1 bg-pfw-gold/20 text-pfw-gold text-xs rounded-full">Cisco</span>
                            <span class="px-2 py-1 bg-pfw-gold/20 text-pfw-gold text-xs rounded-full">Ubiquiti</span>
                            <span class="px-2 py-1 bg-pfw-gold/20 text-pfw-gold text-xs rounded-full">VLANs</span>
                        </div>
                    </div>
                    
                    <!-- Security Tools -->
                    <div class="bg-black p-6 rounded-xl border border-[#333] text-center group hover:border-pfw-gold transition-colors">
                        <div class="w-12 h-12 bg-pfw-gold/20 rounded-lg flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-shield-alt text-pfw-gold text-2xl"></i>
                        </div>
                        <h5 class="text-xl font-semibold mb-3 text-pfw-gold">Security Arsenal</h5>
                        <p class="text-[#f3f4f6]/80 mb-3">Penetration testing and vulnerability assessment tools</p>
                        <div class="flex flex-wrap gap-1 justify-center">
                            <span class="px-2 py-1 bg-pfw-gold/20 text-pfw-gold text-xs rounded-full">Kali Linux</span>
                            <span class="px-2 py-1 bg-pfw-gold/20 text-pfw-gold text-xs rounded-full">pfSense</span>
                            <span class="px-2 py-1 bg-pfw-gold/20 text-pfw-gold text-xs rounded-full">Wireshark</span>
                        </div>
                    </div>
                    
                    <!-- Container Orchestration -->
                    <div class="bg-black p-6 rounded-xl border border-[#333] text-center group hover:border-pfw-gold transition-colors">
                        <div class="w-12 h-12 bg-pfw-gold/20 rounded-lg flex items-center justify-center mx-auto mb-4">
                            <i class="fab fa-docker text-pfw-gold text-2xl"></i>
                        </div>
                        <h5 class="text-xl font-semibold mb-3 text-pfw-gold">Container Platform</h5>
                        <p class="text-[#f3f4f6]/80 mb-3">Docker & Kubernetes for modern application deployment</p>
                        <div class="flex flex-wrap gap-1 justify-center">
                            <span class="px-2 py-1 bg-pfw-gold/20 text-pfw-gold text-xs rounded-full">Docker</span>
                            <span class="px-2 py-1 bg-pfw-gold/20 text-pfw-gold text-xs rounded-full">Kubernetes</span>
                            <span class="px-2 py-1 bg-pfw-gold/20 text-pfw-gold text-xs rounded-full">Portainer</span>
                        </div>
                    </div>
                    
                    <!-- Monitoring & Analytics -->
                    <div class="bg-black p-6 rounded-xl border border-[#333] text-center group hover:border-pfw-gold transition-colors">
                        <div class="w-12 h-12 bg-pfw-gold/20 rounded-lg flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-chart-line text-pfw-gold text-2xl"></i>
                        </div>
                        <h5 class="text-xl font-semibold mb-3 text-pfw-gold">Monitoring Stack</h5>
                        <p class="text-[#f3f4f6]/80 mb-3">Real-time infrastructure monitoring and alerting</p>
                        <div class="flex flex-wrap gap-1 justify-center">
                            <span class="px-2 py-1 bg-pfw-gold/20 text-pfw-gold text-xs rounded-full">Grafana</span>
                            <span class="px-2 py-1 bg-pfw-gold/20 text-pfw-gold text-xs rounded-full">Prometheus</span>
                            <span class="px-2 py-1 bg-pfw-gold/20 text-pfw-gold text-xs rounded-full">ELK Stack</span>
                        </div>
                    </div>
                    
                    <!-- Cloud Integration -->
                    <div class="bg-black p-6 rounded-xl border border-[#333] text-center group hover:border-pfw-gold transition-colors">
                        <div class="w-12 h-12 bg-pfw-gold/20 rounded-lg flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-cloud text-pfw-gold text-2xl"></i>
                        </div>
                        <h5 class="text-xl font-semibold mb-3 text-pfw-gold">Hybrid Cloud</h5>
                        <p class="text-[#f3f4f6]/80 mb-3">AWS, Azure, and GCP integration for hybrid environments</p>
                        <div class="flex flex-wrap gap-1 justify-center">
                            <span class="px-2 py-1 bg-pfw-gold/20 text-pfw-gold text-xs rounded-full">AWS</span>
                            <span class="px-2 py-1 bg-pfw-gold/20 text-pfw-gold text-xs rounded-full">Azure</span>
                            <span class="px-2 py-1 bg-pfw-gold/20 text-pfw-gold text-xs rounded-full">GCP</span>
                        </div>
                    </div>
                </div>

                <!-- Advanced Features -->
                <div class="bg-black rounded-xl p-8 border border-[#333]">
                    <div class="text-center mb-8">
                        <h5 class="text-2xl font-bold text-pfw-gold mb-2">Advanced Features</h5>
                        <p class="text-[#f3f4f6]/70">Enterprise-grade capabilities and redundancy</p>
                    </div>
                    
                    <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <div class="flex items-start space-x-3">
                            <div class="w-6 h-6 bg-pfw-gold/20 rounded-full flex items-center justify-center mt-1 flex-shrink-0">
                                <i class="fas fa-check text-pfw-gold text-xs"></i>
                            </div>
                            <div>
                                <h6 class="font-semibold text-pfw-gold mb-1">UPS Systems</h6>
                                <p class="text-[#f3f4f6]/70 text-sm">Battery backup for power protection</p>
                            </div>
                        </div>
                        <div class="flex items-start space-x-3">
                            <div class="w-6 h-6 bg-pfw-gold/20 rounded-full flex items-center justify-center mt-1 flex-shrink-0">
                                <i class="fas fa-check text-pfw-gold text-xs"></i>
                            </div>
                            <div>
                                <h6 class="font-semibold text-pfw-gold mb-1">Backup Solutions</h6>
                                <p class="text-[#f3f4f6]/70 text-sm">Automated with Veeam and Restic</p>
                            </div>
                        </div>
                        <div class="flex items-start space-x-3">
                            <div class="w-6 h-6 bg-pfw-gold/20 rounded-full flex items-center justify-center mt-1 flex-shrink-0">
                                <i class="fas fa-check text-pfw-gold text-xs"></i>
                            </div>
                            <div>
                                <h6 class="font-semibold text-pfw-gold mb-1">Network Segmentation</h6>
                                <p class="text-[#f3f4f6]/70 text-sm">Isolated security testing</p>
                            </div>
                        </div>
                        <div class="flex items-start space-x-3">
                            <div class="w-6 h-6 bg-pfw-gold/20 rounded-full flex items-center justify-center mt-1 flex-shrink-0">
                                <i class="fas fa-check text-pfw-gold text-xs"></i>
                            </div>
                            <div>
                                <h6 class="font-semibold text-pfw-gold mb-1">Load Balancing</h6>
                                <p class="text-[#f3f4f6]/70 text-sm">HAProxy and NGINX delivery</p>
                            </div>
                        </div>
                        <div class="flex items-start space-x-3">
                            <div class="w-6 h-6 bg-pfw-gold/20 rounded-full flex items-center justify-center mt-1 flex-shrink-0">
                                <i class="fas fa-check text-pfw-gold text-xs"></i>
                            </div>
                            <div>
                                <h6 class="font-semibold text-pfw-gold mb-1">IoT Integration</h6>
                                <p class="text-[#f3f4f6]/70 text-sm">Raspberry Pi clusters</p>
                            </div>
                        </div>
                        <div class="flex items-start space-x-3">
                            <div class="w-6 h-6 bg-pfw-gold/20 rounded-full flex items-center justify-center mt-1 flex-shrink-0">
                                <i class="fas fa-check text-pfw-gold text-xs"></i>
                            </div>
                            <div>
                                <h6 class="font-semibold text-pfw-gold mb-1">DNS & DHCP</h6>
                                <p class="text-[#f3f4f6]/70 text-sm">Pi-hole and ISC DHCP</p>
                            </div>
                        </div>
                        <div class="flex items-start space-x-3">
                            <div class="w-6 h-6 bg-pfw-gold/20 rounded-full flex items-center justify-center mt-1 flex-shrink-0">
                                <i class="fas fa-check text-pfw-gold text-xs"></i>
                            </div>
                            <div>
                                <h6 class="font-semibold text-pfw-gold mb-1">VPN Infrastructure</h6>
                                <p class="text-[#f3f4f6]/70 text-sm">WireGuard and OpenVPN</p>
                            </div>
                        </div>
                        <div class="flex items-start space-x-3">
                            <div class="w-6 h-6 bg-pfw-gold/20 rounded-full flex items-center justify-center mt-1 flex-shrink-0">
                                <i class="fas fa-check text-pfw-gold text-xs"></i>
                            </div>
                            <div>
                                <h6 class="font-semibold text-pfw-gold mb-1">PKI & Certificates</h6>
                                <p class="text-[#f3f4f6]/70 text-sm">Internal certificate authority</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- About Me Section -->
    <section id="about" class="py-20 bg-[#222]">
        <div class="container mx-auto px-6">
            <div class="text-center mb-16">
                <h3 class="text-4xl font-bold mb-4 text-pfw-gold">About Me</h3>
                <p class="text-xl text-[#f3f4f6]/70 max-w-2xl mx-auto">
                    Meet the person behind the passion for technology
                </p>
            </div>
            
            <div class="max-w-6xl mx-auto">
                <!-- Family Slideshow -->
                <div class="bg-black rounded-xl p-8 mb-8 border border-[#333]">
                    <div class="flex flex-col md:flex-row items-center gap-8">
                        <!-- Slideshow Container -->
                        <div class="flex-shrink-0">
                            <div class="relative w-64 h-80 rounded-lg overflow-hidden border-2 border-pfw-gold/30">
                                <div id="familySlideshow" class="relative w-full h-full">
                                    <img src="IMG_0738.JPG" alt="Messiah with family" class="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 opacity-100" id="slide1">
                                    <img src="IMG_0944.jpg" alt="Messiah, Josephine and Emmanuel" class="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 opacity-0" id="slide2">
                                </div>
                                <!-- Slideshow indicators -->
                                <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2">
                                    <div class="w-2 h-2 bg-pfw-gold rounded-full opacity-100" id="indicator1"></div>
                                    <div class="w-2 h-2 bg-white/50 rounded-full opacity-60" id="indicator2"></div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Personal Info -->
                        <div class="flex-1">
                            <h4 class="text-3xl font-bold text-pfw-gold mb-6">Messiah Heredia</h4>
                            <div class="space-y-4 text-lg">
                                <p class="text-[#f3f4f6]/90 leading-relaxed">
                                    <i class="fas fa-graduation-cap text-pfw-gold mr-2"></i>
                                    A Computer Science student pursuing my masters at Purdue Fort Wayne and building knowledge to become a valuable systems administrator. I'm passionate about enterprise infrastructure, network security, and creating robust IT environments that support business operations.
                                </p>
                                <p class="text-[#f3f4f6]/90 leading-relaxed">
                                    <i class="fas fa-heart text-pfw-gold mr-2"></i>
                                    Married to my wonderful wife <span class="text-pfw-gold font-semibold">Josephine</span>, and proud father of my son <span class="text-pfw-gold font-semibold">Emmanuel</span>.
                                </p>
                                <p class="text-[#f3f4f6]/90 leading-relaxed">
                                    <i class="fas fa-code text-pfw-gold mr-2"></i>
                                    When I'm not immersed in servers and security configurations, I enjoy spending quality time with my family, exploring new technologies in my home lab, and continuously expanding my expertise in cybersecurity and cloud infrastructure.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Technical Skills Scrolling Section -->
                <div class="bg-black rounded-xl p-8 border border-[#333] overflow-hidden">
                    <div class="text-center mb-8">
                        <h5 class="text-2xl font-bold text-pfw-gold mb-2">Technical Skills</h5>
                        <p class="text-[#f3f4f6]/70">Technologies and tools I work with</p>
                    </div>
                    
                    <!-- Scrolling Skills Container -->
                    <div class="relative h-16 overflow-hidden">
                        <div id="scrollingSkills" class="flex space-x-8 animate-scroll">
                            <div class="flex-shrink-0 bg-pfw-gold/20 px-6 py-3 rounded-lg border border-pfw-gold/30">
                                <span class="text-pfw-gold font-semibold text-lg">Active Directory</span>
                            </div>
                            <div class="flex-shrink-0 bg-pfw-gold/20 px-6 py-3 rounded-lg border border-pfw-gold/30">
                                <span class="text-pfw-gold font-semibold text-lg">Windows Server</span>
                            </div>
                            <div class="flex-shrink-0 bg-pfw-gold/20 px-6 py-3 rounded-lg border border-pfw-gold/30">
                                <span class="text-pfw-gold font-semibold text-lg">Network Security</span>
                            </div>
                            <div class="flex-shrink-0 bg-pfw-gold/20 px-6 py-3 rounded-lg border border-pfw-gold/30">
                                <span class="text-pfw-gold font-semibold text-lg">Cloud Infrastructure</span>
                            </div>
                            <div class="flex-shrink-0 bg-pfw-gold/20 px-6 py-3 rounded-lg border border-pfw-gold/30">
                                <span class="text-pfw-gold font-semibold text-lg">PowerShell</span>
                            </div>
                            <div class="flex-shrink-0 bg-pfw-gold/20 px-6 py-3 rounded-lg border border-pfw-gold/30">
                                <span class="text-pfw-gold font-semibold text-lg">JavaScript</span>
                            </div>
                            <div class="flex-shrink-0 bg-pfw-gold/20 px-6 py-3 rounded-lg border border-pfw-gold/30">
                                <span class="text-pfw-gold font-semibold text-lg">Python</span>
                            </div>
                            <div class="flex-shrink-0 bg-pfw-gold/20 px-6 py-3 rounded-lg border border-pfw-gold/30">
                                <span class="text-pfw-gold font-semibold text-lg">VMware</span>
                            </div>
                            <div class="flex-shrink-0 bg-pfw-gold/20 px-6 py-3 rounded-lg border border-pfw-gold/30">
                                <span class="text-pfw-gold font-semibold text-lg">Cisco Networking</span>
                            </div>
                            <div class="flex-shrink-0 bg-pfw-gold/20 px-6 py-3 rounded-lg border border-pfw-gold/30">
                                <span class="text-pfw-gold font-semibold text-lg">SQL Server</span>
                            </div>
                            <div class="flex-shrink-0 bg-pfw-gold/20 px-6 py-3 rounded-lg border border-pfw-gold/30">
                                <span class="text-pfw-gold font-semibold text-lg">Docker</span>
                            </div>
                            <div class="flex-shrink-0 bg-pfw-gold/20 px-6 py-3 rounded-lg border border-pfw-gold/30">
                                <span class="text-pfw-gold font-semibold text-lg">Kubernetes</span>
                            </div>
                            <div class="flex-shrink-0 bg-pfw-gold/20 px-6 py-3 rounded-lg border border-pfw-gold/30">
                                <span class="text-pfw-gold font-semibold text-lg">Linux Administration</span>
                            </div>
                            <div class="flex-shrink-0 bg-pfw-gold/20 px-6 py-3 rounded-lg border border-pfw-gold/30">
                                <span class="text-pfw-gold font-semibold text-lg">Azure</span>
                            </div>
                            <div class="flex-shrink-0 bg-pfw-gold/20 px-6 py-3 rounded-lg border border-pfw-gold/30">
                                <span class="text-pfw-gold font-semibold text-lg">Git & GitHub</span>
                            </div>
                            <div class="flex-shrink-0 bg-pfw-gold/20 px-6 py-3 rounded-lg border border-pfw-gold/30">
                                <span class="text-pfw-gold font-semibold text-lg">Ansible</span>
                            </div>
                            <!-- Duplicate for seamless loop -->
                            <div class="flex-shrink-0 bg-pfw-gold/20 px-6 py-3 rounded-lg border border-pfw-gold/30">
                                <span class="text-pfw-gold font-semibold text-lg">Active Directory</span>
                            </div>
                            <div class="flex-shrink-0 bg-pfw-gold/20 px-6 py-3 rounded-lg border border-pfw-gold/30">
                                <span class="text-pfw-gold font-semibold text-lg">Windows Server</span>
                            </div>
                            <div class="flex-shrink-0 bg-pfw-gold/20 px-6 py-3 rounded-lg border border-pfw-gold/30">
                                <span class="text-pfw-gold font-semibold text-lg">Network Security</span>
                            </div>
                            <div class="flex-shrink-0 bg-pfw-gold/20 px-6 py-3 rounded-lg border border-pfw-gold/30">
                                <span class="text-pfw-gold font-semibold text-lg">Cloud Infrastructure</span>
                            </div>
                            <div class="flex-shrink-0 bg-pfw-gold/20 px-6 py-3 rounded-lg border border-pfw-gold/30">
                                <span class="text-pfw-gold font-semibold text-lg">PowerShell</span>
                            </div>
                            <div class="flex-shrink-0 bg-pfw-gold/20 px-6 py-3 rounded-lg border border-pfw-gold/30">
                                <span class="text-pfw-gold font-semibold text-lg">JavaScript</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- AI Chat Box and Theme Toggle Buttons -->
    <div class="fixed bottom-6 right-6 z-50 flex flex-col items-end space-y-3">
        
        <!-- AI Chat Box (Collapsible) -->
        <div id="aiChatBox" class="bg-black border border-pfw-gold/30 rounded-xl shadow-2xl w-80 h-96 flex-col hidden">
            <!-- Header -->
            <div class="flex items-center justify-between p-3 border-b border-pfw-gold/30 bg-pfw-gold/10 rounded-t-xl">
                <div class="flex items-center space-x-2">
                    <i class="fas fa-robot text-pfw-gold text-lg"></i>
                    <h3 class="text-pfw-gold font-semibold text-sm">AI Assistant</h3>
                </div>
                <button id="closeChatBox" class="text-pfw-gold hover:text-pfw-gold-light transition-colors">
                    <i class="fas fa-times text-sm"></i>
                </button>
            </div>
            
            <!-- Chat Messages -->
            <div id="aiMessages" class="flex-1 p-3 overflow-y-auto space-y-2 bg-[#1a1a1a] text-sm">
                <div class="flex items-start space-x-2">
                    <div class="bg-pfw-gold/20 rounded-full p-1 flex-shrink-0">
                        <i class="fas fa-robot text-pfw-gold text-xs"></i>
                    </div>
                    <div class="ai-message-initial bg-[#333] text-white p-2 rounded-lg rounded-tl-none flex-1">
                        <p class="text-xs">Hi! I'm Messiah's AI assistant. Ask me about his background, skills, or projects!</p>
                    </div>
                </div>
            </div>
            
            <!-- Input Area -->
            <div class="ai-input-area p-3 border-t border-pfw-gold/30 bg-[#222] rounded-b-xl">
                <!-- Input Row -->
                <div class="flex space-x-2">
                    <input 
                        id="aiInput" 
                        type="text" 
                        placeholder="Ask about Messiah..." 
                        class="flex-1 bg-[#333] text-white p-2 rounded text-xs border border-pfw-gold/30 focus:border-pfw-gold focus:outline-none"
                    >
                    <button 
                        id="voiceInput" 
                        class="bg-pfw-gold/20 hover:bg-pfw-gold/30 text-pfw-gold px-3 py-2 rounded transition-colors border border-pfw-gold/30 hidden"
                        title="Voice Input"
                    >
                        <i class="fas fa-microphone text-xs"></i>
                    </button>
                    <button 
                        id="aiSend" 
                        class="bg-pfw-gold hover:bg-pfw-gold-dark text-black px-3 py-2 rounded transition-colors"
                    >
                        <i class="fas fa-paper-plane text-xs"></i>
                    </button>
                </div>
                
                <!-- Voice Input Status -->
                <div id="voiceInputStatus" class="mt-2 text-xs text-center text-pfw-gold/70 hidden">
                    <div class="flex items-center justify-center space-x-2">
                        <div class="animate-pulse">
                            <i class="fas fa-comments"></i>
                        </div>
                        <span>Voice conversation active...</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Fixed Buttons -->
        <div class="flex space-x-3">
            <!-- Voice Chat Button -->
            <div class="relative group">
                <button id="voiceChatToggle" class="bg-pfw-gold hover:bg-pfw-gold-dark text-black rounded-full shadow-lg w-14 h-14 flex items-center justify-center text-2xl focus:outline-none transition-all duration-300" aria-label="Voice Chat with AI">
                    <i class="fas fa-microphone"></i>
                </button>
                <!-- Voice Chat Tooltip -->
                <div class="absolute bottom-16 right-0 bg-black text-pfw-gold px-3 py-2 rounded-lg text-sm font-medium whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity duration-300 shadow-lg border border-pfw-gold/30">
                    Voice Chat
                    <div class="absolute top-full right-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-black"></div>
                </div>
            </div>

            <!-- AI Bot Button -->
            <div class="relative group">
                <button id="aiToggle" class="bg-pfw-gold hover:bg-pfw-gold-dark text-black rounded-full shadow-lg w-14 h-14 flex items-center justify-center text-2xl focus:outline-none transition-all duration-300" aria-label="Toggle AI Assistant">
                    <i class="fas fa-robot"></i>
                </button>
                <!-- AI Bot Tooltip -->
                <div class="absolute bottom-16 right-0 bg-black text-pfw-gold px-3 py-2 rounded-lg text-sm font-medium whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity duration-300 shadow-lg border border-pfw-gold/30">
                    AI Assistant
                    <div class="absolute top-full right-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-black"></div>
                </div>
            </div>
            
            <!-- Theme Toggle Button -->
            <div class="relative group">
                <button id="themeToggle" class="bg-pfw-gold hover:bg-pfw-gold-dark text-black rounded-full shadow-lg w-14 h-14 flex items-center justify-center text-2xl focus:outline-none transition-all duration-300" aria-label="Toggle Theme">
                    <i class="fas fa-moon" id="themeIcon"></i>
                </button>
                <!-- Theme Toggle Tooltip -->
                <div class="absolute bottom-16 right-0 bg-black text-pfw-gold px-3 py-2 rounded-lg text-sm font-medium whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity duration-300 shadow-lg border border-pfw-gold/30">
                    Toggle Light/Dark Theme
                    <div class="absolute top-full right-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-black"></div>
                </div>
            </div>
        </div>
        
        <!-- Voice Chat Modal -->
        <div id="voiceSelectionModal" class="bg-black border border-pfw-gold/30 rounded-xl shadow-2xl w-80 p-4 flex-col hidden">
            <div class="flex items-center justify-between mb-4">
                <div class="flex items-center space-x-2">
                    <i class="fas fa-robot text-pfw-gold text-lg"></i>
                    <h3 class="text-pfw-gold font-semibold text-sm">Chat with Nova AI</h3>
                </div>
                <button id="closeVoiceModal" class="text-pfw-gold hover:text-pfw-gold-light transition-colors">
                    <i class="fas fa-times text-sm"></i>
                </button>
            </div>
            
            <!-- Voice Chat Info -->
            <div class="mb-4">
                <div class="bg-[#333] border border-pfw-gold/20 rounded-lg p-4 text-center">
                    <h4 class="text-white font-medium text-sm mb-1">🤖 Nova - AI Assistant</h4>
                    <p class="text-gray-400 text-xs">Advanced AI powered by GPT-4, ready to discuss Messiah's portfolio!</p>
                </div>
            </div>

            <!-- Live Transcript Area (hidden initially) -->
            <div id="voiceTranscriptArea" class="mb-4 hidden">
                <div class="bg-[#222] border border-pfw-gold/20 rounded-lg p-3 max-h-48 overflow-y-auto">
                    <div class="text-pfw-gold text-xs font-medium mb-2 flex items-center">
                        <i class="fas fa-comments mr-1"></i>
                        Live Conversation
                    </div>
                    <div id="voiceTranscript" class="text-white text-xs space-y-2">
                        <!-- Transcript messages will appear here -->
                    </div>
                </div>
            </div>

            <!-- Voice Status Display -->
            <div id="voiceStatusDisplay" class="mb-4 hidden">
                <div class="bg-[#1a1a1a] border border-pfw-gold/20 rounded-lg p-2 text-center">
                    <div id="voiceStatusText" class="text-pfw-gold text-xs">
                        <i class="fas fa-microphone-alt mr-1"></i>
                        Ready to listen...
                    </div>
                    <div id="liveTranscript" class="text-white text-xs mt-1 italic">
                        <!-- Live speech recognition will appear here -->
                    </div>
                </div>
                
                <!-- Manual Speak Button -->
                <div id="manualSpeakContainer" class="mt-2 hidden">
                    <button id="manualSpeakButton" class="w-full bg-pfw-gold hover:bg-pfw-gold-dark text-black font-medium py-1 px-3 rounded text-xs transition-colors">
                        🎤 Click & Speak Now
                    </button>
                </div>
            </div>
            
            <div id="startVoiceChatContainer" class="pt-3 border-t border-pfw-gold/20">
                <button id="startVoiceChat" class="w-full bg-pfw-gold hover:bg-pfw-gold-dark text-black font-medium py-2 px-4 rounded-lg transition-colors">
                    <i class="fas fa-robot mr-2"></i>Talk to Nova AI
                </button>
            </div>
            
            <!-- Stop Voice Chat Button (hidden initially) -->
            <div id="stopVoiceChatContainer" class="pt-3 border-t border-pfw-gold/20 hidden">
                <button id="stopVoiceChat" class="w-full bg-red-500 hover:bg-red-600 text-white font-medium py-2 px-4 rounded-lg transition-colors">
                    <i class="fas fa-stop mr-2"></i>End Nova Conversation
                </button>
            </div>
        </div>

    </div>

    <!-- Footer -->
    <footer class="bg-black py-8 border-t border-[#333]">
        <div class="container mx-auto px-6 text-center">
            <p class="text-[#f3f4f6]/80">© 2025 Messiah Heredia. All rights reserved.</p>
            <p class="text-pfw-gold text-sm mt-2">Website Monitored, Secured, and Created by Siah</p>
            <div class="mt-4 flex justify-center space-x-6">
                <a href="https://github.com/messiahheedia" target="_blank" rel="noopener noreferrer" class="text-pfw-gold hover:text-pfw-gold-light transition-colors">
                    <i class="fab fa-github text-xl"></i>
                </a>
                <a href="https://www.linkedin.com/in/messiah-heredia-587a11362/" target="_blank" rel="noopener noreferrer" class="text-pfw-gold hover:text-pfw-gold-light transition-colors">
                    <i class="fab fa-linkedin text-xl"></i>
                </a>
                <a href="mailto:messiah.heredia@icloud.com" class="text-pfw-gold hover:text-pfw-gold-light transition-colors">
                    <i class="fas fa-envelope text-xl"></i>
                </a>
            </div>
        </div>
    </footer>

    <script>
        // Performance optimized JavaScript
        
        // Utility functions
        const debounce = (func, wait) => {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        };

        const throttle = (func, limit) => {
            let inThrottle;
            return function() {
                const args = arguments;
                const context = this;
                if (!inThrottle) {
                    func.apply(context, args);
                    inThrottle = true;
                    setTimeout(() => inThrottle = false, limit);
                }
            }
        };

        // Draw.io Integration Functions
        let currentDiagram = null;
        let drawioFrame = null;

        // Sample diagram data (you can replace with actual diagram URLs or data)
        const diagramData = {
            network: {
                title: "Diagram 1 - Network Architecture",
                url: "https://app.diagrams.net/?embed=1&ui=kennedy&spin=1&modified=unsavedChanges&proto=json#Uhttps%3A%2F%2Fraw.githubusercontent.com%2Fjgraph%2Fdrawio-diagrams%2Fdev%2Fexamples%2Fnetwork-diagram.drawio",
                description: "Complete enterprise network topology with VLANs, routing, and security zones"
            },
            security: {
                title: "Diagram 2 - Security Architecture",
                url: "https://app.diagrams.net/?embed=1&ui=kennedy&spin=1&modified=unsavedChanges&proto=json#Uhttps%3A%2F%2Fraw.githubusercontent.com%2Fjgraph%2Fdrawio-diagrams%2Fdev%2Fexamples%2Fsecurity-architecture.drawio",
                description: "Multi-layered security implementation with DMZ, firewalls, and intrusion detection"
            },
            infrastructure: {
                title: "Diagram 3 - Infrastructure Design",
                url: "https://app.diagrams.net/?embed=1&ui=kennedy&spin=1&modified=unsavedChanges&proto=json#Uhttps%3A%2F%2Fraw.githubusercontent.com%2Fjgraph%2Fdrawio-diagrams%2Fdev%2Fexamples%2Faws-architecture.drawio",
                description: "Hybrid cloud infrastructure with on-premises and cloud components"
            }
        };

        function openDiagramViewer(type) {
            const modal = document.getElementById('diagramModal');
            const container = document.getElementById('modalDiagramContainer');
            const title = document.getElementById('modalDiagramTitle');
            
            if (diagramData[type]) {
                currentDiagram = type;
                title.textContent = diagramData[type].title;
                
                // Clear existing content
                container.innerHTML = `
                    <div class="absolute inset-0 flex items-center justify-center">
                        <div class="text-center">
                            <i class="fas fa-spinner fa-spin text-pfw-gold text-3xl mb-4"></i>
                            <p class="text-[#f3f4f6]/70">Loading ${diagramData[type].title}...</p>
                        </div>
                    </div>
                `;
                
                // Show modal
                modal.classList.remove('hidden');
                document.body.style.overflow = 'hidden'; // Prevent background scrolling
                
                // Load diagram in iframe
                setTimeout(() => {
                    const iframe = document.createElement('iframe');
                    iframe.src = diagramData[type].url;
                    iframe.style.width = '100%';
                    iframe.style.height = '100%';
                    iframe.style.border = 'none';
                    iframe.frameborder = '0';
                    
                    container.innerHTML = '';
                    container.appendChild(iframe);
                    drawioFrame = iframe;
                }, 1000);
            }
        }

        function closeDiagramModal() {
            const modal = document.getElementById('diagramModal');
            modal.classList.add('hidden');
            document.body.style.overflow = 'auto'; // Restore scrolling
            currentDiagram = null;
            drawioFrame = null;
        }

        // Keep these for backward compatibility with existing buttons
        function loadDiagram(type) {
            openDiagramViewer(type);
        }

        function closeDiagramViewer() {
            closeDiagramModal();
        }

        function openFullScreenDiagram() {
            if (currentDiagram && diagramData[currentDiagram]) {
                // Open in new window/tab for fullscreen experience
                const newWindow = window.open(
                    diagramData[currentDiagram].url,
                    '_blank',
                    'width=1200,height=800,menubar=no,toolbar=no,location=no,status=no'
                );
                if (newWindow) {
                    newWindow.focus();
                } else {
                    // Fallback if popup blocked
                    window.open(diagramData[currentDiagram].url, '_blank');
                }
            }
        }

        function openDiagramEditor() {
            // Open draw.io editor with empty diagram
            const editorUrl = 'https://app.diagrams.net/?embed=1&ui=kennedy&spin=1&proto=json';
            const newWindow = window.open(
                editorUrl,
                '_blank',
                'width=1200,height=800,menubar=no,toolbar=no,location=no,status=no'
            );
            if (newWindow) {
                newWindow.focus();
            } else {
                window.open(editorUrl, '_blank');
            }
        }

        function createNewDiagram() {
            // Open draw.io with network template
            const templateUrl = 'https://app.diagrams.net/?libs=network;aws4;azure;gcp2&template=network&ui=kennedy';
            window.open(templateUrl, '_blank');
        }

        function openTemplateLibrary() {
            // Open draw.io template gallery
            const templatesUrl = 'https://app.diagrams.net/?splash=0&libs=1&ui=kennedy';
            window.open(templatesUrl, '_blank');
        }

        // Preloader with improved performance - multiple fallbacks
        function hidePreloader() {
            const preloader = document.getElementById('preloader');
            if (preloader) {
                preloader.style.opacity = '0';
                setTimeout(() => {
                    preloader.remove(); // Remove from DOM instead of hiding
                }, 300);
                console.log('Preloader hidden');
            }
        }

        // Multiple event listeners to ensure preloader is hidden
        window.addEventListener('load', hidePreloader);
        document.addEventListener('DOMContentLoaded', function() {
            // Hide preloader after 2 seconds as backup
            setTimeout(hidePreloader, 2000);
        });
        
        // Immediate fallback in case of slow loading
        setTimeout(hidePreloader, 5000);

        // Optimized smooth scrolling
        document.addEventListener('DOMContentLoaded', function() {
            // Smooth scrolling for navigation links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href').substring(1);
                    const target = document.getElementById(targetId);
                    
                    if (target) {
                        const headerHeight = document.querySelector('header').offsetHeight;
                        const targetPosition = target.offsetTop - headerHeight;
                        
                        window.scrollTo({
                            top: targetPosition,
                            behavior: 'smooth'
                        });
                    }
                });
            });

            // Enhanced active navigation with throttling
            const updateActiveNav = throttle(function() {
                const sections = document.querySelectorAll('section[id]');
                const navLinks = document.querySelectorAll('.nav-link');
                const headerHeight = document.querySelector('header').offsetHeight;
                
                let current = '';
                const scrollPos = window.pageYOffset + headerHeight + 100;
                
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    const sectionHeight = section.clientHeight;
                    
                    if (scrollPos >= sectionTop && scrollPos < sectionTop + sectionHeight) {
                        current = section.getAttribute('id');
                    }
                });

                navLinks.forEach(link => {
                    link.classList.remove('active-link');
                    if (link.getAttribute('href') === `#${current}`) {
                        link.classList.add('active-link');
                    }
                });
            }, 100);

            window.addEventListener('scroll', updateActiveNav);

            // Intersection Observer for section animations
            const observerOptions = {
                threshold: 0.15,
                rootMargin: '0px 0px -100px 0px'
            };

            const observer = new IntersectionObserver(function(entries) {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('section-visible');
                        // Unobserve after animation to improve performance
                        observer.unobserve(entry.target);
                    }
                });
            }, observerOptions);

            // Observe all sections with animation
            document.querySelectorAll('section').forEach(section => {
                section.classList.add('section-hidden');
                observer.observe(section);
            });



            // Initialize scroll functionality
            initializeScrollContainers();

            // Family slideshow functionality
            initializeFamilySlideshow();
        });

        // Simple scroll functionality
        function initializeScrollContainers() {
            // Portfolio scroll only
            const wrapper = document.getElementById('portfolioScrollWrapper');
            const leftButton = document.getElementById('portfolioScrollLeft');
            const rightButton = document.getElementById('portfolioScrollRight');
            const indicators = document.getElementById('portfolioIndicators');
            
            if (!wrapper || !leftButton || !rightButton || !indicators) return;

            const items = wrapper.children;
            let currentIndex = 0;

            function updateScroll() {
                const itemWidth = 320; // Fixed width for simplicity
                const scrollPosition = currentIndex * itemWidth;
                
                wrapper.scrollTo({
                    left: scrollPosition,
                    behavior: 'smooth'
                });

                // Update button states
                leftButton.disabled = currentIndex === 0;
                rightButton.disabled = currentIndex >= items.length - 1;
                leftButton.style.opacity = currentIndex === 0 ? '0.3' : '1';
                rightButton.style.opacity = currentIndex >= items.length - 1 ? '0.3' : '1';

                // Update indicators
                const indicatorElements = indicators.querySelectorAll('.scroll-indicator');
                indicatorElements.forEach((indicator, index) => {
                    indicator.classList.toggle('active', index === currentIndex);
                });
            }

            // Button events
            leftButton.addEventListener('click', () => {
                if (currentIndex > 0) {
                    currentIndex--;
                    updateScroll();
                }
            });

            rightButton.addEventListener('click', () => {
                if (currentIndex < items.length - 1) {
                    currentIndex++;
                    updateScroll();
                }
            });

            // Indicator clicks
            const indicatorElements = indicators.querySelectorAll('.scroll-indicator');
            indicatorElements.forEach((indicator, index) => {
                indicator.addEventListener('click', () => {
                    currentIndex = index;
                    updateScroll();
                });
            });

            // Initialize
            updateScroll();
        }

        // Family slideshow functionality
        function initializeFamilySlideshow() {
            const slide1 = document.getElementById('slide1');
            const slide2 = document.getElementById('slide2');
            const indicator1 = document.getElementById('indicator1');
            const indicator2 = document.getElementById('indicator2');
            
            if (!slide1 || !slide2 || !indicator1 || !indicator2) return;
            
            let currentSlide = 0;
            const slides = [slide1, slide2];
            const indicators = [indicator1, indicator2];
            
            function showSlide(index) {
                slides.forEach((slide, i) => {
                    if (i === index) {
                        slide.style.opacity = '1';
                    } else {
                        slide.style.opacity = '0';
                    }
                });
                
                indicators.forEach((indicator, i) => {
                    if (i === index) {
                        indicator.style.backgroundColor = '#b9975b';
                        indicator.style.opacity = '1';
                    } else {
                        indicator.style.backgroundColor = 'rgba(255, 255, 255, 0.5)';
                        indicator.style.opacity = '0.6';
                    }
                });
            }
            
            function nextSlide() {
                currentSlide = (currentSlide + 1) % slides.length;
                showSlide(currentSlide);
            }
            
            // Auto-advance slideshow every 4 seconds
            setInterval(nextSlide, 4000);
            
            // Initialize first slide
            showSlide(0);
        }

        // Notification system
        function showNotification(message, type = 'info') {
            // Remove existing notifications
            const existingNotifications = document.querySelectorAll('.notification');
            existingNotifications.forEach(notification => notification.remove());
            
            const notification = document.createElement('div');
            notification.className = `notification fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg transition-all duration-300 transform translate-x-full`;
            
            const colors = {
                success: 'bg-green-600 text-white',
                error: 'bg-red-600 text-white',
                info: 'bg-pfw-gold text-black'
            };
            
            notification.className += ` ${colors[type] || colors.info}`;
            notification.innerHTML = `
                <div class="flex items-center">
                    <span>${message}</span>
                    <button class="ml-4 text-current hover:opacity-70" onclick="this.parentElement.parentElement.remove()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Animate in
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 100);
            
            // Auto remove after 5 seconds
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.style.transform = 'translateX(100%)';
                    setTimeout(() => notification.remove(), 300);
                }
            }, 5000);
        }

        // Add loading states for external links
        document.addEventListener('click', function(e) {
            if (e.target.matches('a[href^="http"]') || e.target.closest('a[href^="http"]')) {
                const link = e.target.matches('a') ? e.target : e.target.closest('a');
                if (link && !link.hasAttribute('target')) {
                    link.setAttribute('target', '_blank');
                    link.setAttribute('rel', 'noopener noreferrer');
                }
            }
        });

        // Keyboard navigation improvements
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                // Close any open modals/notifications
                const notifications = document.querySelectorAll('.notification');
                notifications.forEach(notification => notification.remove());
                
                // Close diagram modal if open
                const diagramModal = document.getElementById('diagramModal');
                if (diagramModal && !diagramModal.classList.contains('hidden')) {
                    closeDiagramModal();
                }
            }
        });

        // Performance monitoring
        if ('performance' in window) {
            window.addEventListener('load', function() {
                setTimeout(() => {
                    const perfData = performance.timing;
                    const loadTime = perfData.loadEventEnd - perfData.navigationStart;
                    console.log(`Page load time: ${loadTime}ms`);
                }, 0);
            });
        }

        // Chat Widget Functionality - Wait for DOM to load
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Chat DOMContentLoaded fired');
            
            const chatToggle = document.getElementById('chatToggle');
            const chatBox = document.getElementById('chatBox');
            const chatClose = document.getElementById('chatClose');
            const chatInput = document.getElementById('chatInput');
            const chatSend = document.getElementById('chatSend');
            const chatMessages = document.getElementById('chatMessages');

            console.log('Chat elements found:', {
                chatToggle: !!chatToggle,
                chatBox: !!chatBox,
                chatClose: !!chatClose,
                chatInput: !!chatInput,
                chatSend: !!chatSend,
                chatMessages: !!chatMessages
            });

            // Check if all elements exist
            if (!chatToggle || !chatBox || !chatClose || !chatInput || !chatSend || !chatMessages) {
                console.error('Chat elements not found - some elements are missing');
                return;
            }

            console.log('All chat elements found successfully');

            // Toggle chat box
            chatToggle.addEventListener('click', () => {
                chatBox.classList.toggle('hidden');
                if (!chatBox.classList.contains('hidden')) {
                    chatInput.focus();
                }
            });

            // Close chat box
            chatClose.addEventListener('click', () => {
                chatBox.classList.add('hidden');
            });

            // Send message function
            async function sendMessage() {
                console.log('sendMessage function called');
                const message = chatInput.value.trim();
                console.log('Message to send:', message);
                
                if (!message) {
                    console.log('No message to send');
                    return;
                }

                // Add user message to chat
                addMessage(message, 'user');
                chatInput.value = '';

                // Add typing indicator
                const typingIndicator = addMessage('Typing...', 'bot', true);

                try {
                    // Send to API with absolute URL for production
                    const apiUrl = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1' 
                        ? '/api/chatbot' 
                        : `${window.location.origin}/api/chatbot`;
                    
                    console.log('Sending message to:', apiUrl);
                    
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({ message: message })
                    });

                    console.log('Response status:', response.status);
                    console.log('Response headers:', response.headers);

                    if (!response.ok) {
                        const errorText = await response.text();
                        console.error('API error response:', errorText);
                        throw new Error(`HTTP error! status: ${response.status} - ${errorText}`);
                    }

                    const data = await response.json();
                    console.log('API response data:', data);
                    
                    // Remove typing indicator
                    typingIndicator.remove();
                    
                    // Add bot response
                    addMessage(data.reply || 'Sorry, I encountered an error. Please try again.', 'bot');
                } catch (error) {
                    console.error('Chat error details:', error);
                    console.error('Error stack:', error.stack);
                    typingIndicator.remove();
                    addMessage(`Sorry, there was an error: ${error.message}. Please contact Messiah directly at messiah.heredia@icloud.com`, 'bot');
                }
            }

            // Add message to chat
            function addMessage(text, sender, isTyping = false) {
                const messageDiv = document.createElement('div');
                messageDiv.className = `p-3 rounded-lg ${sender === 'user' ? 'bg-pfw-gold text-black ml-8' : 'light-theme:bg-gray-100 dark-theme:bg-[#333] light-theme:text-gray-800 dark-theme:text-white mr-8'} ${isTyping ? 'opacity-70' : ''}`;
                messageDiv.innerHTML = `<p class="text-sm">${text}</p>`;
                
                chatMessages.appendChild(messageDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;
                
                return messageDiv;
            }

            // Send message on button click
            console.log('Adding click event listener to send button');
            chatSend.addEventListener('click', () => {
                console.log('Send button clicked');
                sendMessage();
            });

            // Send message on Enter key
            console.log('Adding keypress event listener to input');
            chatInput.addEventListener('keypress', (e) => {
                console.log('Key pressed:', e.key);
                if (e.key === 'Enter') {
                    console.log('Enter key pressed - calling sendMessage');
                    sendMessage();
                }
            });
        });

        // AI Chat Box System
        document.addEventListener('DOMContentLoaded', function() {
            const aiToggle = document.getElementById('aiToggle');
            const aiChatBox = document.getElementById('aiChatBox');
            const closeChatBox = document.getElementById('closeChatBox');
            const aiInput = document.getElementById('aiInput');
            const aiSend = document.getElementById('aiSend');
            const aiMessages = document.getElementById('aiMessages');

            if (!aiToggle || !aiChatBox || !closeChatBox || !aiInput || !aiSend || !aiMessages) {
                console.log('AI chat elements not found');
                return;
            }

            // Toggle chat box visibility
            aiToggle.addEventListener('click', () => {
                if (aiChatBox.classList.contains('hidden')) {
                    aiChatBox.classList.remove('hidden');
                    aiChatBox.classList.add('flex');
                    aiInput.focus();
                } else {
                    aiChatBox.classList.add('hidden');
                    aiChatBox.classList.remove('flex');
                }
            });

            // Close chat box
            closeChatBox.addEventListener('click', () => {
                aiChatBox.classList.add('hidden');
                aiChatBox.classList.remove('flex');
            });

            // Send message function
            async function sendMessage() {
                const message = aiInput.value.trim();
                if (!message) return;

                // Add user message
                addMessage(message, 'user');
                aiInput.value = '';

                // Add typing indicator
                const typingDiv = addTypingIndicator();

                try {
                    const response = await fetch('/api/chatbot', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({ message })
                    });

                    if (!response.ok) {
                        const errorData = await response.json().catch(() => ({}));
                        throw new Error(errorData.error || `HTTP error! status: ${response.status}`);
                    }

                    const data = await response.json();
                    
                    // Remove typing indicator
                    typingDiv.remove();
                    
                    // Add AI response
                    addMessage(data.reply || data.message || 'Sorry, I encountered an error. Please try again.', 'bot');
                } catch (error) {
                    console.error('Chat error details:', error);
                    typingDiv.remove();
                    addMessage(`Sorry, there was an error: ${error.message}. Please contact Messiah directly at messiah.heredia@icloud.com`, 'bot');
                }
            }

            // Add message to chat
            function addMessage(text, sender) {
                const messageDiv = document.createElement('div');
                messageDiv.className = `flex items-start space-x-2 mb-2`;
                
                if (sender === 'user') {
                    messageDiv.innerHTML = `
                        <div class="bg-pfw-gold text-black p-2 rounded-lg rounded-tr-none flex-1 ml-6">
                            <p class="text-xs">${text}</p>
                        </div>
                        <div class="bg-pfw-gold/20 rounded-full p-1 flex-shrink-0">
                            <i class="fas fa-user text-pfw-gold text-xs"></i>
                        </div>
                    `;
                } else {
                    messageDiv.innerHTML = `
                        <div class="bg-pfw-gold/20 rounded-full p-1 flex-shrink-0">
                            <i class="fas fa-robot text-pfw-gold text-xs"></i>
                        </div>
                        <div class="ai-message-bot bg-[#333] text-white p-2 rounded-lg rounded-tl-none flex-1">
                            <p class="text-xs">${text}</p>
                        </div>
                    `;
                }
                
                aiMessages.appendChild(messageDiv);
                aiMessages.scrollTop = aiMessages.scrollHeight;
            }

            // Add typing indicator
            function addTypingIndicator() {
                const typingDiv = document.createElement('div');
                typingDiv.className = 'flex items-start space-x-2 mb-2';
                typingDiv.innerHTML = `
                    <div class="bg-pfw-gold/20 rounded-full p-1 flex-shrink-0">
                        <i class="fas fa-robot text-pfw-gold text-xs"></i>
                    </div>
                    <div class="ai-message-bot bg-[#333] text-white p-2 rounded-lg rounded-tl-none flex-1">
                        <div class="flex space-x-1">
                            <div class="w-1 h-1 bg-pfw-gold rounded-full animate-bounce"></div>
                            <div class="w-1 h-1 bg-pfw-gold rounded-full animate-bounce" style="animation-delay: 0.1s"></div>
                            <div class="w-1 h-1 bg-pfw-gold rounded-full animate-bounce" style="animation-delay: 0.2s"></div>
                        </div>
                    </div>
                `;
                aiMessages.appendChild(typingDiv);
                aiMessages.scrollTop = aiMessages.scrollHeight;
                return typingDiv;
            }

            // Send message on button click
            aiSend.addEventListener('click', sendMessage);

            // Send message on Enter key
            aiInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });

            // Regular chatbot voice functionality removed - using separate voice chat button
        });

        // Voice Chat System - Enhanced with Live Transcript
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🎤 Voice Chat System initializing...');
            
            // Simple debugging first
            console.log('Testing speech recognition support...');
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                console.log('✅ Speech Recognition supported');
            } else {
                console.log('❌ Speech Recognition NOT supported');
            }
            
            let selectedAIVoice = 'alloy';
            let isVoiceChatActive = false;
            let speechRecognition = null;
            let conversationTranscript = [];
            let ttsFailCount = 0; // Track TTS failures
            const maxTtsFailures = 3; // Disable TTS after 3 failures
            let restartAttempts = 0;
            let isRestartPending = false;
            let isRecognitionRunning = false;
            
            // Get DOM elements with error checking
            const voiceChatToggle = document.getElementById('voiceChatToggle');
            const voiceSelectionModal = document.getElementById('voiceSelectionModal');
            const closeVoiceModal = document.getElementById('closeVoiceModal');
            const startVoiceChat = document.getElementById('startVoiceChat');
            const startVoiceChatContainer = document.getElementById('startVoiceChatContainer');
            const stopVoiceChat = document.getElementById('stopVoiceChat');
            const stopVoiceChatContainer = document.getElementById('stopVoiceChatContainer');
            const voiceTranscriptArea = document.getElementById('voiceTranscriptArea');
            const voiceTranscript = document.getElementById('voiceTranscript');
            const voiceStatusDisplay = document.getElementById('voiceStatusDisplay');
            const voiceStatusText = document.getElementById('voiceStatusText');
            const liveTranscript = document.getElementById('liveTranscript');
            const manualSpeakContainer = document.getElementById('manualSpeakContainer');
            const manualSpeakButton = document.getElementById('manualSpeakButton');

            // Debug log to check if all elements exist
            console.log('DOM Elements found:', {
                voiceChatToggle: !!voiceChatToggle,
                voiceSelectionModal: !!voiceSelectionModal,
                closeVoiceModal: !!closeVoiceModal,
                startVoiceChat: !!startVoiceChat,
                voiceTranscriptArea: !!voiceTranscriptArea,
                voiceTranscript: !!voiceTranscript,
                voiceStatusDisplay: !!voiceStatusDisplay,
                voiceStatusText: !!voiceStatusText,
                liveTranscript: !!liveTranscript
            });

            // Check microphone permissions and access
            async function checkMicrophoneAccess() {
                console.log('🎙️ Checking microphone access...');
                
                try {
                    // Check if we're in a secure context (required for microphone access)
                    if (!window.isSecureContext) {
                        console.error('❌ Microphone requires secure context (HTTPS)');
                        updateVoiceStatus('❌ Microphone requires HTTPS', 'error');
                        addTranscriptMessage('System', '🔒 Microphone access requires a secure connection (HTTPS). Please use the live site.', 'system');
                        return false;
                    }

                    // Check if getUserMedia is available
                    if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
                        console.error('❌ getUserMedia not supported');
                        updateVoiceStatus('❌ Microphone not supported', 'error');
                        addTranscriptMessage('System', '❌ Microphone access not supported in this browser.', 'system');
                        return false;
                    }

                    // Check permissions API if available
                    if ('permissions' in navigator) {
                        try {
                            const permission = await navigator.permissions.query({ name: 'microphone' });
                            console.log('🎙️ Microphone permission state:', permission.state);
                            
                            if (permission.state === 'denied') {
                                updateVoiceStatus('❌ Microphone access denied in browser settings', 'error');
                                addTranscriptMessage('System', '🎙️ Microphone access denied. Please enable microphone permissions in your browser settings and refresh the page.', 'system');
                                return false;
                            }
                        } catch (err) {
                            console.log('⚠️ Could not check permissions API:', err.message);
                        }
                    }
                    
                    // Try to access microphone directly
                    console.log('🎙️ Requesting microphone access...');
                    const stream = await navigator.mediaDevices.getUserMedia({ 
                        audio: {
                            echoCancellation: true,
                            noiseSuppression: true,
                            autoGainControl: true
                        } 
                    });
                    
                    console.log('✅ Microphone access granted');
                    
                    // Check if we have audio tracks
                    const audioTracks = stream.getAudioTracks();
                    if (audioTracks.length > 0) {
                        const track = audioTracks[0];
                        console.log('🎙️ Audio track found:', track.label || 'Default microphone');
                        console.log('🎙️ Audio track settings:', track.getSettings());
                        console.log('🎙️ Audio track capabilities:', track.getCapabilities());
                        
                        // Check if track is enabled and ready
                        if (track.readyState !== 'live') {
                            console.warn('⚠️ Audio track not in live state:', track.readyState);
                        }
                    } else {
                        console.error('❌ No audio tracks available');
                        updateVoiceStatus('❌ No microphone detected', 'error');
                        addTranscriptMessage('System', '❌ No microphone detected. Please check your audio devices.', 'system');
                        stream.getTracks().forEach(track => track.stop());
                        return false;
                    }
                    
                    // Stop the stream - we just needed to test access
                    stream.getTracks().forEach(track => track.stop());
                    return true;
                    
                } catch (error) {
                    console.error('🎙️ Microphone access error:', error);
                    let errorMessage = 'Microphone access failed';
                    
                    if (error.name === 'NotAllowedError') {
                        errorMessage = 'Microphone access denied - please allow microphone permissions';
                    } else if (error.name === 'NotFoundError') {
                        errorMessage = 'No microphone found - please check your audio devices';
                    } else if (error.name === 'NotReadableError') {
                        errorMessage = 'Microphone is being used by another application';
                    }
                    
                    updateVoiceStatus(`❌ ${errorMessage}`, 'error');
                    addTranscriptMessage('System', errorMessage, 'system');
                    return false;
                }
            }

            // Initialize speech recognition
            function initializeSpeechRecognition() {
                if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
                    console.error('Speech recognition not supported');
                    return false;
                }

                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                speechRecognition = new SpeechRecognition();
                
                // Simple continuous recognition setup
                speechRecognition.continuous = false; // Changed to false for better control
                speechRecognition.interimResults = true; // Enable interim results to show progress
                speechRecognition.lang = 'en-US';
                speechRecognition.maxAlternatives = 1;
                
                speechRecognition.onstart = function() {
                    console.log('🎤 Listening...');
                    isRecognitionRunning = true;
                    updateVoiceStatus('🎤 Listening...', 'success');
                };

                speechRecognition.onresult = function(event) {
                    console.log('🎤 Speech recognition result event:', event.results.length);
                    
                    for (let i = event.resultIndex; i < event.results.length; i++) {
                        const result = event.results[i];
                        const transcript = result[0].transcript;
                        
                        if (result.isFinal) {
                            console.log('✅ Final speech result:', transcript);
                            const finalTranscript = transcript.trim();
                            if (finalTranscript.length > 1) {
                                // Process the final result
                                processUserSpeech(finalTranscript);
                            }
                        } else {
                            // Show interim results for user feedback
                            console.log('🔄 Interim speech result:', transcript);
                            updateVoiceStatus(`🎤 Listening: "${transcript.trim()}"`, 'listening');
                        }
                    }
                };

                speechRecognition.onerror = function(event) {
                    console.log('Speech error:', event.error);
                    isRecognitionRunning = false;
                    
                    if (event.error === 'not-allowed') {
                        updateVoiceStatus('❌ Microphone access denied', 'error');
                        return;
                    }
                    
                    // Restart on any error
                    setTimeout(() => {
                        if (isVoiceChatActive) {
                            startListening();
                        }
                    }, 1000);
                };

                speechRecognition.onend = function() {
                    console.log('🔄 Speech recognition ended');
                    isRecognitionRunning = false;
                    
                    // Auto-restart for continuous listening loop
                    if (isVoiceChatActive) {
                        console.log('🔁 Auto-restarting speech recognition...');
                        setTimeout(() => {
                            if (isVoiceChatActive && !isRecognitionRunning) {
                                startListening();
                            }
                        }, 100);
                    }
                };

                return true;
            }

            // Simple start listening function
            function startListening() {
                console.log('🎯 startListening called, isRecognitionRunning:', isRecognitionRunning, 'isVoiceChatActive:', isVoiceChatActive);
                
                if (!speechRecognition) {
                    console.error('❌ No speech recognition object');
                    return;
                }
                
                if (isRecognitionRunning) {
                    console.log('⚠️ Recognition already running, skipping...');
                    return;
                }
                
                if (!isVoiceChatActive) {
                    console.log('⚠️ Voice chat not active, skipping...');
                    return;
                }
                
                try {
                    console.log('🎤 Starting speech recognition...');
                    speechRecognition.start();
                } catch (error) {
                    console.error('❌ Error starting recognition:', error);
                    isRecognitionRunning = false;
                    
                    // Retry in a moment
                    setTimeout(() => {
                        if (isVoiceChatActive) {
                            console.log('🔄 Retrying startListening...');
                            startListening();
                        }
                    }, 1000);
                }
            }

            // Process user speech input - simplified
            async function processUserSpeech(transcript) {
                console.log(`🎯 processUserSpeech CALLED with: "${transcript}"`);
                console.log('🔍 Function context:', { isVoiceChatActive, transcript: transcript.length });
                
                if (!transcript || transcript.length < 2) {
                    console.log('❌ Transcript too short, ignoring');
                    return;
                }
                
                console.log('✅ Processing valid transcript...');
                
                // Add user message to transcript
                addTranscriptMessage('You', transcript, 'user');
                updateVoiceStatus('🤔 Nova is thinking...', 'processing');
                
                // Stop listening while Nova responds
                if (speechRecognition && isRecognitionRunning) {
                    speechRecognition.stop();
                }
                
                // Check for stop commands
                if (transcript.toLowerCase().includes('stop') || transcript.toLowerCase().includes('end chat')) {
                    stopVoiceChatSession();
                    return;
                }

                try {
                    console.log('🚀 Starting AI API call...');
                    
                    // Build conversation history
                    const conversationHistory = conversationTranscript
                        .filter(msg => msg.type === 'user' || msg.type === 'ai')
                        .map(msg => ({
                            role: msg.type === 'user' ? 'user' : 'assistant',
                            content: msg.message
                        }))
                        .slice(-10);
                    
                    console.log('📝 Conversation history:', conversationHistory);
                    
                    const requestBody = { 
                        message: transcript,
                        conversationHistory: conversationHistory
                    };
                    console.log('📤 Request body:', requestBody);
                    
                    const response = await fetch('/api/ai-chat', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(requestBody)
                    });
                    
                    console.log('📥 API Response status:', response.status, response.statusText);

                    if (response.ok) {
                        console.log('✅ API call successful, parsing response...');
                        const data = await response.json();
                        console.log('📋 API response data:', data);
                        
                        const aiResponse = data.reply || 'Sorry, I had trouble understanding that.';
                        console.log('🤖 Nova response:', aiResponse);
                        
                        // Add Nova response to transcript
                        addTranscriptMessage('Nova', aiResponse, 'ai');
                        
                        // Speak the response, then restart listening
                        console.log('🗨️ About to speak response...');
                        await speakWithSelectedVoice(aiResponse);
                        
                        // Restart listening after Nova finishes speaking
                        setTimeout(() => {
                            if (isVoiceChatActive) {
                                console.log('🔄 Restarting listening after Nova response...');
                                startListening();
                            }
                        }, 500);
                    } else {
                        console.error('❌ API call failed:', response.status, response.statusText);
                        const errorText = await response.text();
                        console.error('❌ Error details:', errorText);
                        
                        const errorMsg = "I'm having trouble processing that. Could you try asking me something else?";
                        addTranscriptMessage('Nova', errorMsg, 'ai');
                        await speakWithSelectedVoice(errorMsg);
                        setTimeout(() => {
                            if (isVoiceChatActive) {
                                startListening();
                            }
                        }, 500);
                    }
                } catch (error) {
                    console.error('Voice chat error:', error);
                    const errorMsg = "I encountered a technical issue. Please try asking me something else.";
                    addTranscriptMessage('Nova', errorMsg, 'ai');
                    await speakWithSelectedVoice(errorMsg);
                    setTimeout(() => {
                        if (isVoiceChatActive) {
                            startListening();
                        }
                    }, 500);
                }
            }

            // Add message to transcript
            function addTranscriptMessage(sender, message, type) {
                console.log(`📝 Adding transcript message: ${sender}: ${message}`);
                
                if (!voiceTranscript) {
                    console.error('❌ voiceTranscript element not found');
                    console.error('❌ Available elements:', {
                        voiceTranscriptArea: !!document.getElementById('voiceTranscriptArea'),
                        voiceTranscript: !!document.getElementById('voiceTranscript'),
                        voiceStatusDisplay: !!document.getElementById('voiceStatusDisplay')
                    });
                    return;
                }
                
                console.log('📊 voiceTranscript element found, current children:', voiceTranscript.children.length);
                
                const timestamp = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
                const messageElement = document.createElement('div');
                messageElement.className = `transcript-message ${type} mb-2`;
                
                const senderClass = type === 'user' ? 'text-blue-400' : 
                                   type === 'ai' ? 'text-pfw-gold' : 
                                   'text-gray-400';
                
                messageElement.innerHTML = `
                    <div class="flex items-start space-x-2">
                        <div class="${senderClass} font-medium text-xs min-w-0">${sender}:</div>
                        <div class="text-white text-xs flex-1 break-words">${message}</div>
                        <div class="text-gray-500 text-xs shrink-0">${timestamp}</div>
                    </div>
                `;
                
                voiceTranscript.appendChild(messageElement);
                console.log('📊 Message element added. New children count:', voiceTranscript.children.length);
                
                // Auto-scroll to bottom
                voiceTranscript.scrollTop = voiceTranscript.scrollHeight;
                
                // Store in conversation history
                conversationTranscript.push({ sender, message, timestamp, type });
                
                console.log(`✅ Transcript message added. Total messages: ${conversationTranscript.length}`);
            }

            // Update voice status display
            function updateVoiceStatus(message, type = 'info') {
                console.log(`🔄 Voice Status: ${message} (${type})`);
                
                if (voiceStatusText) {
                    const icons = {
                        success: '🎤',
                        listening: '🗣️',
                        processing: '🤔',
                        error: '❌',
                        info: 'ℹ️'
                    };
                    
                    voiceStatusText.innerHTML = `${icons[type] || 'ℹ️'} ${message}`;
                } else {
                    console.warn('⚠️ voiceStatusText element not found');
                }
                
                // Also update live transcript if applicable
                if (type === 'listening' && liveTranscript) {
                    liveTranscript.textContent = '';
                }
            }

            // Get user-friendly error messages
            function getErrorMessage(error) {
                const messages = {
                    'no-speech': 'No speech detected - try speaking louder',
                    'audio-capture': 'Microphone not available',
                    'not-allowed': 'Microphone access denied',
                    'network': 'Network error - check connection',
                    'aborted': 'Recognition was interrupted'
                };
                return messages[error] || 'Recognition error occurred';
            }

            // Speak with AI voice
            async function speakWithSelectedVoice(text) {
                // Skip TTS if it has failed too many times
                if (ttsFailCount >= maxTtsFailures) {
                    console.log('🗨️ TTS disabled due to previous failures, skipping...');
                    updateVoiceStatus('📝 Text-only mode (TTS disabled)', 'info');
                    
                    // Just resume listening immediately
                    if (isVoiceChatActive && !isRecognitionRunning) {
                        setTimeout(() => {
                            updateVoiceStatus('🎤 Ready to listen...', 'success');
                            if (speechRecognition) {
                                try {
                                    isRecognitionRunning = true;
                                    speechRecognition.start();
                                } catch (error) {
                                    console.warn('Failed to restart after TTS skip:', error);
                                    isRecognitionRunning = false;
                                }
                            }
                        }, 500);
                    }
                    return;
                }
                
                console.log('🗨️ TTS Request starting...', { text: text.substring(0, 100) + '...', voice: selectedAIVoice });
                updateVoiceStatus('🗨️ Speaking...', 'info');
                
                try {
                    const requestBody = {
                        text: text,
                        voice: selectedAIVoice,
                        model: 'tts-1'
                    };
                    
                    console.log('🗨️ TTS Request body:', requestBody);
                    
                    const response = await fetch('/api/tts', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(requestBody)
                    });

                    console.log('🗨️ TTS Response status:', response.status, response.statusText);

                    if (response.ok) {
                        const audioBlob = await response.blob();
                        console.log('🗨️ Audio blob received, size:', audioBlob.size);
                        const audioURL = URL.createObjectURL(audioBlob);
                        const audio = new Audio(audioURL);
                        
                        audio.onended = () => {
                            console.log('🗨️ Audio playback completed');
                            URL.revokeObjectURL(audioURL);
                            // Resume listening after TTS
                            updateVoiceStatus('🎤 Listening...', 'success');
                            setTimeout(() => {
                                if (isVoiceChatActive) {
                                    startListening();
                                }
                            }, 500);
                        };
                        
                        console.log('🗨️ Starting audio playback...');
                        
                        // Handle audio playback with permission fallback
                        try {
                            await audio.play();
                        } catch (playError) {
                            console.error('🗨️ Audio playback failed:', playError);
                            
                            // Check if it's a permission/interaction error
                            if (playError.name === 'NotAllowedError' || playError.message.includes('interact')) {
                                console.log('🗨️ Audio requires user interaction, adding click handler...');
                                updateVoiceStatus('🔊 Click to enable audio', 'warning');
                                addTranscriptMessage('System', '🔊 Click anywhere on the page to enable voice responses', 'system');
                                
                                // Create a one-time click handler to enable audio
                                const enableAudio = async () => {
                                    try {
                                        await audio.play();
                                        document.removeEventListener('click', enableAudio);
                                        updateVoiceStatus('🗨️ Audio enabled, continuing...', 'success');
                                    } catch (retryError) {
                                        console.error('🗨️ Audio retry failed:', retryError);
                                        // Fall through to text-only mode
                                        audio.onended();
                                    }
                                };
                                document.addEventListener('click', enableAudio, { once: true });
                                
                                // Also continue after timeout if no click
                                setTimeout(() => {
                                    document.removeEventListener('click', enableAudio);
                                    console.log('🗨️ Audio timeout, continuing in text-only mode');
                                    audio.onended();
                                }, 5000);
                                
                            } else {
                                // Other audio errors, continue without audio
                                console.error('🗨️ Non-permission audio error:', playError);
                                audio.onended();
                            }
                        }
                    } else {
                        // Get error details from response
                        let errorText = '';
                        try {
                            const errorData = await response.json();
                            errorText = errorData.error || errorData.details || 'Unknown TTS error';
                            console.error('🗨️ TTS API Error:', errorData);
                        } catch (e) {
                            errorText = `HTTP ${response.status}: ${response.statusText}`;
                            console.error('🗨️ TTS Response Error:', errorText);
                        }
                        throw new Error(`TTS failed: ${errorText}`);
                    }
                } catch (error) {
                    console.error('🗨️ TTS error details:', error);
                    ttsFailCount++;
                    
                    let errorMessage = error.message || 'Unknown TTS error';
                    updateVoiceStatus(`❌ Speech synthesis failed: ${errorMessage}`, 'error');
                    
                    if (ttsFailCount >= maxTtsFailures) {
                        addTranscriptMessage('System', `⚠️ TTS disabled after ${maxTtsFailures} failures. Voice chat will continue text-only.`, 'system');
                        console.warn(`🗨️ TTS disabled after ${maxTtsFailures} failures`);
                    } else {
                        addTranscriptMessage('System', `TTS Error (${ttsFailCount}/${maxTtsFailures}): ${errorMessage}`, 'system');
                    }
                    
                    // Resume listening even if TTS failed
                    if (isVoiceChatActive && !isRecognitionRunning) {
                        setTimeout(() => {
                            updateVoiceStatus('🎤 Ready to listen...', 'success');
                            if (speechRecognition) {
                                try {
                                    isRecognitionRunning = true;
                                    speechRecognition.start();
                                } catch (error) {
                                    console.warn('Failed to restart after TTS error:', error);
                                    isRecognitionRunning = false;
                                }
                            }
                        }, 1000);
                    }
                }
            }

            // Get Nova's introduction and start the conversation
            async function getNovaIntroduction() {
                console.log('🤖 Getting Nova introduction...');
                updateVoiceStatus('🤖 Nova is introducing herself...', 'processing');
                
                try {
                    const response = await fetch('/api/nova-intro');
                    if (response.ok) {
                        const data = await response.json();
                        const introduction = data.introduction;
                        
                        console.log('✨ Nova introduction received');
                        addTranscriptMessage('Nova', introduction, 'ai');
                        
                        // Speak Nova's introduction
                        await speakWithSelectedVoice(introduction);
                        
                        // Add helpful message after introduction
                        setTimeout(() => {
                            addTranscriptMessage('System', '💡 Tip: Say "stop" or "end chat" to finish the conversation. Speak clearly for best results!', 'system');
                        }, 2000);
                        
                    } else {
                        throw new Error('Failed to get introduction');
                    }
                } catch (error) {
                    console.error('❌ Failed to get Nova introduction:', error);
                    const fallbackIntro = "Hello! I'm Nova, Messiah Heredia's AI assistant! I'm excited to tell you about his amazing work as a full-stack developer and help answer any questions about his skills and projects. What would you like to know?";
                    addTranscriptMessage('Nova', fallbackIntro, 'ai');
                    await speakWithSelectedVoice(fallbackIntro);
                }
            }

            // Start voice chat session
            async function startVoiceChatSession() {
                console.log('🚀 Starting voice chat session...');
                
                // Test audio permissions early with a silent audio
                try {
                    const testAudio = new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwfBz2b3/LGdSsFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwfBz2b3/LGdSsFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwfBz2b3/LGdSsFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwfBz2b3/LGdSsFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwfBz2b3/LGdSsFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwfBz2b3/LGdSsFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwfBz2b3/LGdSs=');
                    testAudio.volume = 0; // Silent
                    await testAudio.play();
                    console.log('✅ Audio permissions OK');
                } catch (audioError) {
                    console.log('⚠️ Audio autoplay blocked, will request permission on first TTS:', audioError);
                    updateVoiceStatus('🔊 Audio will need permission on first response', 'info');
                }
                
                try {
                    // Simple test - just try to start recognition without all the complex checks
                    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                    
                    if (!SpeechRecognition) {
                        console.error('❌ Speech Recognition not supported');
                        updateVoiceStatus('❌ Speech Recognition not supported in your browser', 'error');
                        return;
                    }
                    
                    speechRecognition = new SpeechRecognition();
                    speechRecognition.continuous = true;  // Keep listening continuously
                    speechRecognition.interimResults = true;
                    speechRecognition.lang = 'en-US';
                    
                    console.log('✅ Speech Recognition created with continuous=true');
                    
                    speechRecognition.onstart = function() {
                        console.log('🎤 Speech started!');
                        isRecognitionRunning = true;
                        updateVoiceStatus('🎤 Listening...', 'success');
                    };
                    
                    speechRecognition.onresult = function(event) {
                        console.log('🎤 Got speech result:', event.results);
                        for (let i = 0; i < event.results.length; i++) {
                            const result = event.results[i];
                            if (result.isFinal) {
                                const text = result[0].transcript.trim();
                                console.log('Final result:', text);
                                
                                // Process the speech with Nova AI
                                if (text && text.length > 1) {
                                    console.log('🎯 CALLING processUserSpeech with:', text);
                                    processUserSpeech(text);
                                } else {
                                    console.log('⚠️ Speech too short, ignoring:', text);
                                    // If no meaningful speech, just restart listening
                                    setTimeout(() => {
                                        if (isVoiceChatActive) {
                                            console.log('🔁 No speech detected, restarting...');
                                            startListening();
                                        }
                                    }, 1000);
                                }
                            } else {
                                const text = result[0].transcript;
                                console.log('Interim result:', text);
                                updateVoiceStatus(`🎤 Hearing: "${text}"`, 'listening');
                            }
                        }
                    };
                    
                    speechRecognition.onerror = function(event) {
                        console.error('🎤 Speech error:', event.error);
                        updateVoiceStatus(`❌ Error: ${event.error}`, 'error');
                        isRecognitionRunning = false;
                        
                        setTimeout(() => {
                            if (isVoiceChatActive) {
                                console.log('� Retrying after error...');
                                startListening();
                            }
                        }, 2000);
                    };
                    
                    speechRecognition.onend = function() {
                        console.log('🔄 Speech ended');
                        isRecognitionRunning = false;
                        
                        if (isVoiceChatActive) {
                            setTimeout(() => {
                                console.log('🔁 Auto-restarting...');
                                startListening();
                            }, 500);
                        }
                    };
                    
                    // Set flags
                    isVoiceChatActive = true;
                    isRecognitionRunning = false;
                    
                    // Show UI elements
                    if (voiceTranscriptArea) {
                        voiceTranscriptArea.classList.remove('hidden');
                        console.log('✅ Transcript area shown');
                    }
                    
                    if (voiceStatusDisplay) {
                        voiceStatusDisplay.classList.remove('hidden');
                        console.log('✅ Status display shown');
                    }
                    
                    // Clear transcript
                    if (voiceTranscript) {
                        voiceTranscript.innerHTML = '';
                        console.log('🧹 Transcript cleared');
                    }
                    
                    // Add welcome message
                    addTranscriptMessage('System', '🎤 Voice chat started! Say something to test...', 'system');
                    
                    // Start listening
                    console.log('� About to start listening...');
                    startListening();
                    
                } catch (error) {
                    console.error('❌ Failed to start voice chat:', error);
                    updateVoiceStatus(`❌ Failed to start: ${error.message}`, 'error');
                }
            }

            // Stop voice chat session
            function stopVoiceChatSession() {
                isVoiceChatActive = false;
                isRecognitionRunning = false;
                
                // Update UI
                const micIcon = voiceChatToggle.querySelector('i');
                micIcon.className = 'fas fa-microphone';
                voiceChatToggle.classList.remove('bg-red-500');
                voiceChatToggle.classList.add('bg-pfw-gold');
                
                // Hide transcript and status areas
                voiceTranscriptArea.classList.add('hidden');
                voiceStatusDisplay.classList.add('hidden');
                
                // Show the start voice chat button again, hide stop button
                if (startVoiceChatContainer && stopVoiceChatContainer) {
                    startVoiceChatContainer.classList.remove('hidden');
                    stopVoiceChatContainer.classList.add('hidden');
                }
                
                // Hide manual speak button when voice chat ends
                if (manualSpeakContainer) {
                    manualSpeakContainer.style.display = 'none';
                }
                
                // Hide the entire modal when voice chat ends
                voiceSelectionModal.classList.add('hidden');
                voiceSelectionModal.classList.remove('flex');
                
                // Stop recognition
                if (speechRecognition) {
                    speechRecognition.stop();
                }
                
                // Add farewell message
                addTranscriptMessage('System', 'Voice chat ended. Thanks for chatting!', 'system');
            }

            // Event Listeners
            voiceChatToggle.addEventListener('click', function() {
                if (isVoiceChatActive) {
                    stopVoiceChatSession();
                } else if (voiceSelectionModal.classList.contains('hidden')) {
                    voiceSelectionModal.classList.remove('hidden');
                    voiceSelectionModal.classList.add('flex');
                }
            });

            closeVoiceModal.addEventListener('click', function() {
                if (isVoiceChatActive) {
                    // If voice chat is active, stop it first
                    stopVoiceChatSession();
                }
                voiceSelectionModal.classList.add('hidden');
                voiceSelectionModal.classList.remove('flex');
            });

            startVoiceChat.addEventListener('click', function() {
                console.log('🚀 Start voice chat clicked! Testing basic speech recognition...');
                // Don't hide the modal - keep it open to show transcript
                // voiceSelectionModal.classList.add('hidden');
                // voiceSelectionModal.classList.remove('flex');
                startVoiceChatSession();
            });

            stopVoiceChat.addEventListener('click', function() {
                console.log('🛑 Stop voice chat clicked!');
                stopVoiceChatSession();
            });

            // Manual speak button event handler
            manualSpeakButton.addEventListener('click', function() {
                console.log('🎤 Manual speak button clicked');
                
                // Show user that we're ready for manual input
                updateVoiceStatus('🎙️ Click and speak now...', 'info');
                manualSpeakButton.textContent = '🔴 Recording... (speak now)';
                manualSpeakButton.disabled = true;
                
                // Start a one-time recognition session
                if (speechRecognition) {
                    speechRecognition.continuous = false; // One-time recognition
                    speechRecognition.interimResults = true;
                    
                    // Set up one-time event handlers
                    const handleResult = function(event) {
                        if (event.results.length > 0) {
                            const result = event.results[event.results.length - 1];
                            if (result.isFinal) {
                                const transcript = result[0].transcript.trim();
                                console.log('🎤 Manual speech recognized:', transcript);
                                
                                // Process the speech
                                if (transcript) {
                                    addTranscriptMessage('You', transcript, 'user');
                                    processUserSpeech(transcript);
                                }
                                
                                // Reset button
                                manualSpeakButton.textContent = '🎤 Click & Speak Now';
                                manualSpeakButton.disabled = false;
                                updateVoiceStatus('🎤 Manual speech mode - click button to speak', 'success');
                                
                                // Clean up one-time handlers
                                speechRecognition.removeEventListener('result', handleResult);
                                speechRecognition.removeEventListener('error', handleError);
                            }
                        }
                    };
                    
                    const handleError = function(event) {
                        console.error('Manual speech recognition error:', event.error);
                        manualSpeakButton.textContent = '🎤 Click & Speak Now';
                        manualSpeakButton.disabled = false;
                        updateVoiceStatus('❌ Speech recognition failed - try again', 'error');
                        
                        // Clean up one-time handlers
                        speechRecognition.removeEventListener('result', handleResult);
                        speechRecognition.removeEventListener('error', handleError);
                    };
                    
                    // Add one-time event listeners
                    speechRecognition.addEventListener('result', handleResult);
                    speechRecognition.addEventListener('error', handleError);
                    
                    try {
                        speechRecognition.start();
                    } catch (error) {
                        console.error('Failed to start manual speech recognition:', error);
                        handleError({ error: 'start-failed' });
                    }
                } else {
                    updateVoiceStatus('❌ Speech recognition not available', 'error');
                    manualSpeakButton.textContent = '🎤 Click & Speak Now';
                    manualSpeakButton.disabled = false;
                }
            });
        });

        // Theme Toggle System
        document.addEventListener('DOMContentLoaded', function() {
            const themeToggle = document.getElementById('themeToggle');
            const themeIcon = document.getElementById('themeIcon');

            if (!themeToggle || !themeIcon) {
                console.log('Theme toggle elements not found');
                return;
            }

            // Check for saved theme preference or default to light
            const currentTheme = localStorage.getItem('theme') || 'light';
            
            // Apply theme on load
            if (currentTheme === 'light') {
                document.body.classList.add('light-theme');
                themeIcon.className = 'fas fa-sun';
            } else {
                document.body.classList.remove('light-theme');
                themeIcon.className = 'fas fa-moon';
            }

            // Theme toggle functionality
            themeToggle.addEventListener('click', () => {
                if (document.body.classList.contains('light-theme')) {
                    // Switch to dark theme
                    document.body.classList.remove('light-theme');
                    themeIcon.className = 'fas fa-moon';
                    localStorage.setItem('theme', 'dark');
                } else {
                    // Switch to light theme
                    document.body.classList.add('light-theme');
                    themeIcon.className = 'fas fa-sun';
                    localStorage.setItem('theme', 'light');
                }
            });
        });

        // Add CSS animation and immediate preloader fallback
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeIn {
                from { opacity: 0; transform: translateY(10px); }
                to { opacity: 1; transform: translateY(0); }
            }
            .animate-fadeIn {
                animation: fadeIn 0.3s ease-out;
            }
        `;
        document.head.appendChild(style);
        
        // Emergency preloader removal - executes immediately
        (function() {
            let preloaderHidden = false;
            
            function forceHidePreloader() {
                if (!preloaderHidden) {
                    const preloader = document.getElementById('preloader');
                    if (preloader) {
                        preloader.style.display = 'none';
                        preloaderHidden = true;
                        console.log('Preloader force hidden');
                    }
                }
            }
            
            // Hide preloader after 3 seconds maximum
            setTimeout(forceHidePreloader, 3000);
            
            // Also try to hide when page is interactive
            if (document.readyState === 'interactive' || document.readyState === 'complete') {
                setTimeout(forceHidePreloader, 1000);
            }
        })();
    </script>
</body>
</html>
